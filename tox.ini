[tox]
minversion = 1.6
skipsdist = True

envlist = py27,pep8,flake8

[testenv]
deps =
    nose
    -rmodules/admin/data/requirements.txt
commands = nosetests modules/admin/data modules/mediawiki/files/apache/sites/redirects

[testenv:flake8]
commands = flake8 files utils modules/base modules/dataset modules/elasticsearch modules/toollabs modules/wdqs
deps =
    flake8
    pep8

[testenv:pep8]
commands = pep8 {posargs}
deps = pep8==1.4.6

[flake8]
exclude = .git,.tox,*/ganglia/*,*/virtscripts/logstat.py,modules/librenms/files/purge.py,modules/cdh/*,modules/jmxtrans/*,modules/kafka/*,modules/kafkatee/*,modules/mariadb/*,modules/nginx/*,modules/varnishkafka/*,modules/wikimetrics/*,modules/zookeeper/*,*/ps_mem.py,modules/apache/files/apache_status.py,modules/deployment/files/runners/deploy.py,modules/deployment/files/modules/deploy.py,modules/deployment/files/returners/deploy_redis.py,modules/librenms/files/purge.py,modules/apt/files/apt2xml.py,modules/ldap/files/scripts/homedirectorymanager.py,modules/ldap/files/scripts/ldapsupportlib.py,modules/tcpircbot/files/tcpircbot.py,modules/openstack/files/*,modules/mediawiki/files/monitoring/mwerrors.py,modules/service/files/checker.py,modules/pybal/files/pybal-eval-check.py,modules/phabricator/files/phab_epipe.py,modules/labstore/files/monitor/nfsd.py,modules/swift/files/SwiftMedia/wmf/rewrite.py,modules/webperf/files/asset-check.py,modules/webperf/files/deprecate.py,modules/webperf/files/navtiming.py,modules/webperf/files/ve.py,modules/mailman/files/mm_cfg.py,modules/servermon/files/urls.py,modules/varnish/files/varnishprocessor/*,modules/hhvm/files/debug/printers.py

max-line-length = 173
# E241 multiple spaces after ':'
ignore = E241

[pep8]
exclude = .git,.tox,*/ganglia/*,*/virtscripts/logstat.py,*/modules/librenms/files/purge.py,*/modules/cdh/*,*/modules/jmxtrans/*,*/modules/kafka/*,*/modules/kafkatee/*,*/modules/mariadb/*,*/modules/nginx/*,*/modules/varnishkafka/*,*/modules/wikimetrics/*,*/modules/zookeeper/*,

max-line-length = 173
# E241 multiple spaces after ':'
ignore = E241
