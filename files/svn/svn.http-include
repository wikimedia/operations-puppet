# This file is managed by puppet

<VirtualHost *:80>
	ServerName svn.wikimedia.org
	DocumentRoot /srv/org/wikimedia/svn

	<Location />
		# Some annoying bots that have slowed things down in the past
		Deny from 220.181.19.85
		Deny from 221.115.95.197
		Deny from 81.208.25.37
		# Evil spider 2008-03-10... .153 and .152 at least
		Deny from 121.14.96.0/24
		Deny from 58.60.14.236
	</Location>

	<Directory /srv/org/wikimedia/svn>
		Order Allow,Deny
		Allow from all
		Deny from 220.181.19.85
		Deny from 221.115.95.197
		Deny from 81.208.25.37 

		Options Indexes FollowSymLinks
	</Directory>

	<Location /svnroot>
		DAV svn
		SVNParentPath /svnroot
		AuthzSVNAccessFile /etc/apache2/svn-authz
		#    SVNIndexXSLT /svnindex.xsl

		Order Allow,Deny
		Allow from all
		<LimitExcept GET PROPFIND OPTIONS REPORT>
			Deny from all
		</LimitExcept>
	</Location>

	ScriptAlias /viewvc /usr/lib/cgi-bin/viewvc.cgi
	# ScriptAlias /viewvc114 /usr/local/viewvc-1.1.4/bin/cgi/viewvc.cgi
	# <Location /viewvc/*docroot*/>
	# ExpiresDefault "access plus 4 weeks"
	# </Location>

	Alias /doc /var/mwdocs/phase3/docs/html
	<Directory /var/mwdocs/phase3/docs/html>
		Allow from all
	</Directory>

	Alias /stats /var/statsvn/html
	<Directory /var/statsvn/html>
		Allow from all
	</Directory>

	Alias /dumps /home/demon/svn
	<Directory /home/demon/svn>
		Allow from all
		Options Indexes FollowSymLinks
	</Directory>
</VirtualHost>
