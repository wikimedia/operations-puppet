# Aggregation methods for whisper files. Entries are scanned in order,
# and first match wins. This file is scanned for changes every 60 seconds
#
#  [name]
#  pattern = <regex>
#  xFilesFactor = <float between 0 and 1>
#  aggregationMethod = <average|sum|last|max|min>
#
#  name: Arbitrary unique name for the rule
#  pattern: Regex pattern to match against the metric name
#  xFilesFactor: Ratio of valid data points required for aggregation to the next retention to occur
#  aggregationMethod: function to apply to data points for aggregation
#
# See upstream documentation:
#
#   http://graphite.readthedocs.org/en/latest/config-carbon.html
#
[min]
pattern = \.min$
xFilesFactor = 0.1
aggregationMethod = min

# Default from graphite
[max]
pattern = \.max$
xFilesFactor = 0.1
aggregationMethod = max

# Default from graphite
[sum]
pattern = \.count$
xFilesFactor = 0
aggregationMethod = sum


# Defaults for statsd:
# See Statsd documentation:
# https://github.com/etsy/statsd/blob/master/docs/graphite.md
# lower/upper/sum are send for all timers (stats.timers)
[min]
pattern = \.lower$
xFilesFactor = 0
aggregationMethod = min

[max]
pattern = \.upper$
xFilesFactor = 0
aggregationMethod = max

[sum]
pattern = \.sum$
xFilesFactor = 0
aggregationMethod = sum

[count]
pattern = \.count$
xFilesFactor = 0
aggregationMethod = sum

[count_legacy]
pattern = ^stats_counts\.
xFilesFactor = 0
aggregationMethod = sum

# End of 'Defaults for statsd'

# Stats `stats.*` are counts per seconds, we aggregate them by sum and make
# sure we keep any metric even if it is missing some points.
[stats]
pattern = ^stats\.
xFilesFactor = 0
aggregationMethod = sum

[default]
xFilesFactor = 0.2

