filter {
  if [type] == "bash" {
    # Strip !bash from start of message
    grok {
      match => [ "message", "^!bash %{GREEDYDATA:message}$" ]
      overwrite => [ "message" ]
      named_captures_only => true
    }

    mutate {
        # Replace tabs with newlines
        gsub => [ "message", "\t", "\n" ]

        # Trim leading/trailing whitespace
        strip => [ "message" ]
    }
  } # end [type] == "bash"
}
