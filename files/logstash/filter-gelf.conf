filter {
  if [type] == "gelf" {
    mutate {
      # tag gelf messages for storage in elasticsearch
      add_tag => [ "es", "gelf" ]
    }
    mutate {
      # move field names to what we're expecting
      merge   => [ "message", "%{short_message}" ]
      replace => [ "type", "%{facility}" ]
    }
    mutate {
      # get rid of fields we moved
      remove_field => [ "short_message", "facility" ]
    }
  }
}
