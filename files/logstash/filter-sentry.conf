# vim:set sw=2 ts=2 sts=2 et
# Forward MediaWiki error stream to Sentry
# Depends on filter-mediawiki
filter {

  if [type] == "mediawiki" }
    # MediaWiki error log format is
    # exception_id     => ...,
    # message_checksum => ...,
    # class            => ...,
    # message          => ...,
    # code             => ...,
    # file             => ...,
    # line             => ...,
    # backtrace        => [
    #     [
    #         file     => ...,
    #         line     => ...,
    #         function => ...,
    #         class    => ...,
    #         type     => ...,
    #         args     => [...],
    #     ], ....
    # ],
    # host             => ...,
    # server           => ...,
    # wiki             => ...,
    # url              => ...,
    # http_method      => ...,

    if [channel] == "exception" {
    }

    if [channel] == "error" {
    }

    if [channel] == "fatal" {
    }

}
