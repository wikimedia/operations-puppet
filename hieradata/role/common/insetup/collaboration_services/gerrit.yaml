# This prevents the gerrit service IP from being bound on the network interface.
# It is still used in firewall rules etc but won't actually be activated.
# This prevents causing duplicate IPs on the network (bad!) or having to request
# additional service IPs just to test and bring up a new Gerrit machine. (T372804)
profile::gerrit::bind_service_ip: false

# We want to set this to true but have to test.
profile::ssh::server::disable_nist_kex: false

# Same as normal production role.
profile::firewall::nftables_throttling::ensure: present
profile::firewall::nftables_throttling::nft_policy: drop
# allow 32 parallel TCP connections, ban clients above for 300 seconds
profile::firewall::nftables_throttling::max_connections: 32
profile::firewall::nftables_throttling::throttle_duration: 600
profile::firewall::nftables_throttling::port: 443
profile::firewall::nftables_throttling::nft_logging: true
