cluster: eventbus
admin::groups:
  - eventbus-admins
role::lvs::realserver::pools:
  eventbus: {}


profile::kafka::broker::kafka_cluster_name: main

# Enable SSL/TLS for Kafka.  This requires
# that keystore and truststore files, and
# profile::kafka::broker::ssl_password, are committed in
# the expected location in ops/puppet/private.
profile::kafka::broker::ssl_enabled: false

# Enable basic ACL handling via Zookeeper stored rules
# More info https://phabricator.wikimedia.org/T167304#3478277
profile::kafka::broker::auth_acls_enabled: false

# Enable Monitoring (via Prometheus) and icinga alerts
profile::kafka::broker::monitoring_enabled: false

profile::kafka::broker::log_dirs: [/srv/kafka/data]
profile::kafka::broker::plaintext: true

profile::kafka::broker::auto_leader_rebalance_enable: true
profile::kafka::broker::nofiles_ulimit: 65536

profile::kafka::broker::log_retention_hours: 168  # 1 week

# Bump this up to get a little more parallelism between replicas.
profile::kafka::broker::num_replica_fetchers: 4

# 12 disks in the broker HW RAID array
profile::kafka::broker::num_recovery_threads_per_data_dir: 4
profile::kafka::broker::num_io_threads: 4

# To be changed during Kafka broker version upgrades
profile::kafka::broker::inter_broker_protocol_version: 0.9.0.1
profile::kafka::broker::log_message_format_version: 0.9.0.1

# Used for ensuring the proper package version is installed
profile::kafka::broker::scala_version: 2.11.7
profile::kafka::broker::kafka_version: 0.9.0.1-1

# Auto rebalance is better in 1.x.  Disable until we upgrade.
profile::kafka::broker::auto_leader_rebalance_enable: false

profile::kafka::broker::monitoring::replica_maxlag_warning: 100000
profile::kafka::broker::monitoring::replica_maxlag_critical: 500000

