cluster: logstash
admin::groups:
  - logstash-roots

# ES-specific
# NOTE: multicast_group and cluster_name must be kept in sync with the backend
# node config in hieradata/role/common/logstash/elasticsearch.yaml
# FIXME: should multicast_group be different than production ES?
elasticsearch::multicast_group: 224.2.2.5
elasticsearch::minimum_master_nodes: 2
elasticsearch::cluster_name: production-logstash-eqiad
elasticsearch::heap_memory: '2G'
elasticsearch::expected_nodes: 3
elasticsearch::recover_after_nodes: 2
elasticsearch::recover_after_time: '1m'
# The ES nodes that are run on the same box as Logstash+Kibana are only used
# as client nodes to communicate with the backing cluster.
elasticsearch::master_eligible: false
elasticsearch::holds_data: false

# Logstash specific
logstash::heap_memory_mb: '1G'
# TODO: the multiline filter that is used in several places in the
# current configuration isn't thread safe and can cause crashes or
# garbled output when used with more than one thread worker.
logstash::filter_workers: 1
