nagios_group: analytics_eqiad
cluster: analytics
standard::has_ganglia: false
admin::groups:
  - analytics-users
  - analytics-privatedata-users
  - analytics-admins
  # elasticsearch::analytics creates the analytics-search user and group
  # that analytics-search-users are allowed to sudo to.  This is used
  # for deploying files to HDFS.
  - analytics-search-users

profile::hadoop::master::monitoring_enabled: true
profile::hadoop::logstash::enabled: false

# This is the heap zize of YARN daemons ResourceManager and NodeManagers.
# This setting is used to configure the max heap size for both.
# The default is 1000m, we increase it to 2048m in production.
profile::hadoop::common::yarn_heapsize: 2048

# Used to set up jvm heap size usage thresholds
profile::hadoop::master::namenode_heapsize: 6144

# Prometheus JMX Exporter config templates. The missing variables will be filled
# in the worker profile before commons.
profile::hadoop::common::hadoop_namenode_opts: "-Xms6144m -Xmx6144m -javaagent:/usr/share/java/prometheus/jmx_prometheus_javaagent.jar=%{::ipaddress}:%{::profile::hadoop::master::prometheus_jmx_exporter_namenode_port}:%{::profile::hadoop::master::namenode_jmx_exporter_config_file}"
profile::hadoop::common::yarn_resourcemanager_opts: "-Xms2048m -javaagent:/usr/share/java/prometheus/jmx_prometheus_javaagent.jar=%{::ipaddress}:%{::profile::hadoop::master::prometheus_jmx_exporter_resourcemanager_port}:%{::profile::hadoop::master::resourcemanager_jmx_exporter_config_file}"
profile::hadoop::common::mapreduce_history_java_opts: "-Xms4096m -Xmx4096m -javaagent:/usr/share/java/prometheus/jmx_prometheus_javaagent.jar=%{::ipaddress}:%{::profile::hadoop::master::prometheus_jmx_exporter_history_port}:%{::profile::hadoop::master::history_jmx_exporter_config_file}"