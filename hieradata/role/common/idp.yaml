profile::idp::services:
  'icinga':
    class: 'org.apereo.cas.services.RegexRegisteredService'
    id: 1
    service_id: 'https://(cas-)?icinga.wikimedia.org(/.*)?'
    attribute_release_policy:
      '@class': 'org.apereo.cas.services.ReturnAllAttributeReleasePolicy'
    access_strategy:
      '@class': 'org.apereo.cas.services.DefaultRegisteredServiceAccessStrategy'
  'debmonitor':
    class: 'org.apereo.cas.services.RegexRegisteredService'
    id: 2
    service_id: '^https://debmonitor.wikimedia.org(/.*)?'
    attribute_release_policy:
      '@class': 'org.apereo.cas.services.ReturnAllAttributeReleasePolicy'
    access_strategy:
      '@class': 'org.apereo.cas.services.DefaultRegisteredServiceAccessStrategy'
      'requiredAttributes':
        '@class': 'java.util.HashMap'
        'memberOf': ['java.util.HashSet', ['cn=wmf,ou=groups,dc=wikimedia,dc=org', 'cn=nda,ou=groups,dc=wikimedia,dc=org']]
  'puppetboard':
    class: 'org.apereo.cas.services.RegexRegisteredService'
    id: 3
    service_id: 'https://(cas-)?puppetboard.wikimedia.org(/.*)?'
    attribute_release_policy:
      '@class': 'org.apereo.cas.services.ReturnAllAttributeReleasePolicy'
    access_strategy:
      '@class': 'org.apereo.cas.services.DefaultRegisteredServiceAccessStrategy'
      'requiredAttributes':
        '@class': 'java.util.HashMap'
        'memberOf': ['java.util.HashSet', ['cn=ops,ou=groups,dc=wikimedia,dc=org']]
profile::idp::ldap_attributes:
  - cn
  - memberOf
  - mail
  - mfa-method
profile::tlsproxy::instance::ssl_compatibility_mode: strong
profile::base::enable_adduser: true
