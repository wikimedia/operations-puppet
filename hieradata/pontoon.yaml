## Minimal defaults to get catalogs to compile
profile::base::labs::unattended_wmf: 'present'
profile::base::labs::unattended_distro: 'present'
profile::openstack::eqiad1::version: 'victoria'
profile::base::labs::clean_kernels: false

# Pontoon is including 'role' classes directly in Cloud VPS
profile::base::production::enable: false
profile::base::production::enable_ip6_mapped: false

profile::resolving::nameservers:
  - 208.80.154.143
  - 208.80.154.24

mail_smarthost:
- 'mx-out03.wmcloud.org'
- 'mx-out04.wmcloud.org'
wikimail_smarthost:
- 'mx-out03.wmcloud.org'
- 'mx-out04.wmcloud.org'

# Default to blackholing all emails generated by Pontoon hosts
# See also https://phabricator.wikimedia.org/T296373 for more context
profile::mail::default_mail_relay::template: 'profile/mail/default_mail_relay/exim4.minimal.blackhole.erb'

profile::systemd::timesyncd::ntp_servers:
  - 'ntp-03.cloudinfra.eqiad1.wikimedia.cloud'
  - 'ntp-04.cloudinfra.eqiad1.wikimedia.cloud'

ntp_peers:
    eqiad:
    - 'ntp-03.cloudinfra.eqiad1.wikimedia.cloud'
    - 'ntp-04.cloudinfra.eqiad1.wikimedia.cloud'
    codfw: []
    ulsfo: []
    eqsin: []
    esams: []
    drmrs: []

## Disable remote syslog logging, as it breaks rsyslog in cloud VPSes.
profile::base::remote_syslog: []
profile::base::remote_syslog_tls: {}

# Disable email alerts
profile::cumin::master::email_alerts: false

## Customizations

profile::apt::use_proxy: false
diamond::remove: true

## SSH access
bastion_hosts:
  - 172.16.0.0/12
## hosts using "CACHES" in firewall config
cache_hosts:
  - 172.16.0.0/12

## Cloud VPS cumin access - T287269
## If you run cumin in your stack, make sure to override this variable and _append_ your host(s)
cumin_masters:
  - 172.16.4.160 # cloud-cumin-03.cloudinfra.eqiad1.wikimedia.cloud
  - 172.16.2.249 # cloud-cumin-04.cloudinfra.eqiad1.wikimedia.cloud

## Puppet CA management
manage_puppet_ca_file: false
puppetmaster: "%{alias('__master_for_role_puppetmaster__pontoon')}"
puppet_ca_server: "%{alias('__master_for_role_puppetmaster__pontoon')}"

# profile::apt hardcodes http proxy that only works in production.  We don't need this in cloud.
profile::apt::use_proxy: false

profile::base::certificates::trusted_certs: ~
