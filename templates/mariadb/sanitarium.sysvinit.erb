#!/bin/bash

# Manually specifying --defaults-file because mysqld_multi
# will detect our /etc/mysql/my.cnf symlink as a second cnf
# and try to start each instance twice.

CURRENT_DIR=`pwd`
INSTALL_DIR=/opt/wmf-mariadb10

case "$1" in
    start)
        cd INSTALL_DIR
        $INSTALL_DIR/bin/mysqld_multi --defaults-file=/etc/my.cnf start 1-7
        cd CURRENT_DIR
        ;;
    stop)
        cd INSTALL_DIR
        $INSTALL_DIR/bin/mysqld_multi --defaults-file=/etc/my.cnf stop 1-7
        cd CURRENT_DIR
        ;;
    status)
        cd INSTALL_DIR
        $INSTALL_DIR/bin/mysqld_multi --defaults-file=/etc/my.cnf report
        cd CURRENT_DIR
        ;;
    *)
        echo $"Usage: $0 {start|stop|status}"
        exit 1
esac
exit 0
