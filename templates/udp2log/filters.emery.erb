###
####    This file managed by puppet.
###

# udp2log packet loss monitoring
pipe 10 /usr/bin/packet-loss 10 '\t' >> /var/log/squid/packet-loss.log

# 0.0001 of all udp2log messages
# This log file is also on locke for redundancy
file 1000 /var/log/squid/sampled-1000.tab.log

# API Usage
pipe 100 /usr/bin/udp-filter -F '\t' -p /w/api.php >> /var/log/squid/api-usage.tab.log 

# GLAM NARA / National Archives - RT 2212
pipe 10 /usr/bin/udp-filter -F '\t' -p _NARA_ -g -m /var/log/squid/filters/GeoIPLibs/GeoIP.dat -b country >> /var/log/squid/glam_nara.tab.log

# Location geocoding filter for Erik Zachte.
pipe 1000 /usr/bin/udp-filter -F '\t' -g -b everything >> /var/log/squid/location-1000.tab.log

# Teahouse filters
pipe 10 /usr/bin/udp-filter -F '\t' -d en.wikipedia.org -p /wiki/Wikipedia:Teahouse >> /var/log/squid/teahouse.tab.log

# Arabic Wikipedia Banner Pages - Siko Bouterse <sbouterse@wikimedia.org>, Haitham Shammaa <hshammaa@wikimedia.org>
pipe 10 /usr/bin/udp-filter -F '\t' -d ar.wikipedia.org -p '/wiki/%D9%88%D9%8A%D9%83%D9%8A%D8%A8%D9%8A%D8%AF%D9%8A%D8%A7:%D8%A8%D9%88%D8%A7%D8%A8%D8%A9_%D8%A7%D9%84%D9%85%D8%B4%D8%A7%D8%B1%D9%83%D8%A9' >> /var/log/squid/arabic-banner.tab.log
