# This file is managed by Puppet!

[main]
logdir = /var/log/puppet
vardir = /var/lib/puppet
ssldir = <%= is_puppetmaster ? '/var/lib/puppet/server/ssl' : '/var/lib/puppet/ssl' %>
rundir = /var/run/puppet
factpath = $vardir/lib/facter
certname = <%= certname %>

[agent]
server = <%= server %>
configtimeout = 480
splay = true
prerun_command = /etc/puppet/etckeeper-commit-pre
postrun_command = /etc/puppet/etckeeper-commit-post
pluginsync = false
report = true

<% if is_puppetmaster -%>
[master]
bindaddress = <%= bindaddress %>
ca_md = sha1
thin_storeconfigs = true
templatedir = /etc/puppet/templates

# SSL
ssldir = /var/lib/puppet/server/ssl
ssl_client_header = SSL_CLIENT_S_DN
ssl_client_verify_header = SSL_CLIENT_VERIFY
hostcert = /var/lib/puppet/server/ssl/certs/<%= fqdn %>.pem
hostprivkey = /var/lib/puppet/server/ssl/private_keys/<%= fqdn %>.pem

<% scope.lookupvar('puppet::self::config::config').sort.each do |setting, value| -%>
<%= setting %> = <%= value %>
<% end -%>
<% end -%>