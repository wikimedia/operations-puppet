# This file is managed by Puppet!

<VirtualHost *:80>
	<Location />
		Order allow,deny
		Allow from localhost
		Allow from stafford.pmtpa.wmnet
	</Location>

	# this is the passenger config
	RailsEnv production
	RailsBaseURI /
	SetEnv X_DEBIAN_SITEID "default"
	Alias "/plugin_assets/" /var/cache/puppet-dashboard./default/plugin_assets/
	DocumentRoot /usr/share/puppet-dashboard/public
	<Directory "/usr/share/puppet-dashboard/public">
		Order allow,deny
		Allow from all
	</Directory>
</VirtualHost>

<VirtualHost *:443>
	SSLEngine on
	SSLProtocol -ALL +SSLv3 +TLSv1
	SSLCipherSuite ALL:!ADH:RC4+RSA:+HIGH:+MEDIUM:-LOW:-SSLv2:-EXP

	SSLCertificateFile      /etc/ssl/certs/ssl-cert-snakeoil.pem
	SSLCertificateKeyFile   /etc/ssl/private/ssl-cert-snakeoil.key
	SSLOptions +StdEnvVars

	# this is the passenger config
	RailsEnv production
	RailsBaseURI /
	SetEnv X_DEBIAN_SITEID "default"
	Alias "/plugin_assets/" /var/cache/puppet-dashboard./default/plugin_assets/
	DocumentRoot /usr/share/puppet-dashboard/public
	<Directory "/usr/share/puppet-dashboard/public">
		Order allow,deny
		Allow from all
	</Directory>
</VirtualHost>