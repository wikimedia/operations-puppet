sub misc_recv_pass {
<%
    hostcmps = []
    @vcl_config['req_handling'].keys.sort.each do |reqhost|
        if @vcl_config['req_handling'][reqhost]['force-pass']
            if reqhost ~ /^[-.A-Za-z0-9]+$/
                hostop = "=="
            else
                hostop = "~"
            end
            hostcmps.push(%Q[req.http.Host #{hostop} "#{reqhost}"])
        end
    end
    pass_conds = hostcmps.join("\n        || ");
%>
    if (
           <%= pass_conds -%>
    ) {
        return (pass);
    }

    if (<%= @req_method -%> != "GET" && <%= @req_method -%> != "HEAD") {
        // We only deal with GET and HEAD
        return (pass);
    }
}
