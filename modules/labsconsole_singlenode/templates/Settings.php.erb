<?php

$wgScriptPath       = "/w";
$wgScriptExtension  = ".php";
$wgArticlePath = '/wiki/$1';

$wgStylePath        = "$wgScriptPath/skins";

$wgEnableEmail      = true;
$wgEnableUserEmail  = true;

$wgEmergencyContact = "noc@wikimedia.org";
$wgPasswordSender   = "noc@wikimedia.org";

$wgEnotifUserTalk      = true;
$wgEnotifWatchlist     = true;
$wgEmailAuthentication = true;

$wgEnableUploads  = true;
$wgUseImageMagick = true;
$wgImageMagickConvertCommand = "/usr/bin/convert";

$wgUseInstantCommons  = true;

$wgShellLocale = "en_US.utf8";

$wgUseTeX           = false;

$wgLanguageCode = "en";

$wgDefaultSkin = "vector";

$wgEnableCreativeCommonsRdf = true;
$wgRightsPage = "";
$wgRightsUrl  = "http://creativecommons.org/licenses/by-sa/3.0/";
$wgRightsText = "Creative Commons Attribution Share Alike";
$wgRightsIcon = "{$wgStylePath}/common/images/cc-by-sa.png";

$wgDiff3 = "/usr/bin/diff3";

$wgDBtype           = "mysql";
$wgDBprefix         = "";
$wgDBTableOptions   = "ENGINE=InnoDB, DEFAULT CHARSET=binary";
$wgDBmysql5 = false;

$wgJobRunRate = 0;

$wgCacheDirectory = "$IP/cache";

$wgMainCacheType    = CACHE_MEMCACHED;
$wgParserCacheType = CACHE_MEMCACHED;
$wgMessageCacheType = CACHE_MEMCACHED; 
$wgSessionsInMemcached = true;
$wgMemCachedServers = array( '127.0.0.1:11000' );

$wgCacheEpoch = "20120611221408";

$wgCookieSecure = true;
# 7 days max login token. Keystone is set to 7.1 days. If either changes
# then both need to be adjusted
$wgCookieExpiration = 604800;

$wgShowIPinHeader = false;
$wgDisableCounters = true;

$wgAllowUserCss = true;
$wgAllowUserJs = true;

# Anons can't edit
$wgGroupPermissions['*']['edit'] = false;

# Give another group import rights
$wgGroupPermissions['importers']['import'] = true;
$wgGroupPermissions['importers']['importupload'] = true;

#$wgGroupPermissions['accountcreators']['createaccount'] = true;

$wgGroupPermissions['contentadmin']['protect'] = true;
$wgGroupPermissions['contentadmin']['editprotected'] = true;
$wgGroupPermissions['contentadmin']['bigdelete'] = true;
$wgGroupPermissions['contentadmin']['delete'] = true;
$wgGroupPermissions['contentadmin']['undelete'] = true;
$wgGroupPermissions['contentadmin']['block'] = true;
$wgGroupPermissions['contentadmin']['blockemail'] = true;
$wgGroupPermissions['contentadmin']['patrol'] = true;
$wgGroupPermissions['contentadmin']['autopatrol'] = true;
$wgGroupPermissions['contentadmin']['import'] = true;
$wgGroupPermissions['contentadmin']['importupload'] = true;
$wgGroupPermissions['contentadmin']['upload_by_url'] = true;
$wgGroupPermissions['contentadmin']['movefile'] = true;
$wgGroupPermissions['contentadmin']['suppressredirect'] = true;
$wgGroupPermissions['contentadmin']['rollback'] = true;
$wgGroupPermissions['contentadmin']['browsearchive'] = true;
$wgGroupPermissions['contentadmin']['deletedhistory'] = true;
$wgGroupPermissions['contentadmin']['deletedtext'] = true;
$wgGroupPermissions['contentadmin']['autoconfirmed'] = true;

require_once( "$IP/extensions/WikiEditor/WikiEditor.php" );

require_once( "$IP/extensions/Echo/Echo.php" );

require_once( "$IP/extensions/CodeEditor/CodeEditor.php" );

require_once( "$IP/extensions/Scribunto/Scribunto.php" );
$wgScribuntoDefaultEngine = 'luastandalone';
$wgScribuntoUseGeSHi = true;
$wgScribuntoUseCodeEditor = true;

require_once( "$IP/extensions/ConfirmEdit/ConfirmEdit.php" );
#require_once( "$IP/extensions/ConfirmEdit/FancyCaptcha.php" );
#$wgCaptchaClass = 'FancyCaptcha';
#$wgCaptchaDirectory = '/srv/org/wikimedia/controller/wikis/captcha';
#$wgCaptchaDirectoryLevels = 0;
#$wgCaptchaWhitelist = '#^(https?:)?//([.a-z0-9-]+\\.)?((wikidata|wikimedia|wikipedia|wiktionary|wikiquote|wikibooks|wikisource|wikispecies|mediawiki|wikimediafoundation|wikinews|wikiversity|wikivoyage)\.org|dnsstuff\.com|completewhois\.com|wikimedia\.de|toolserver\.org)(/|$)#i';
$wgGroupPermissions['accountcreators']['skipcaptcha'] = true;
$wgGroupPermissions['bots']['skipcaptcha'] = true;

require_once( "$IP/extensions/Renameuser/Renameuser.php" );

require_once( "$IP/extensions/DynamicSidebar/DynamicSidebar.php" );

require_once( "$IP/extensions/SyntaxHighlight_GeSHi/SyntaxHighlight_GeSHi.php" );

require_once( "$IP/extensions/Cite/Cite.php" );

require_once( "$IP/extensions/Vector/Vector.php" );
$wgDefaultUserOptions['vector-collapsiblenav'] = 1;
$wgVectorUseSimpleSearch = true;

require_once( "$IP/extensions/WikiEditor/WikiEditor.php" );
$wgDefaultUserOptions['usebetatoolbar'] = 1;
$wgDefaultUserOptions['usebetatoolbar-cgd'] = 1;

require_once( "$IP/extensions/Gadgets/Gadgets.php" );

require_once( "$IP/extensions/CategoryTree/CategoryTree.php" );

require_once( "$IP/extensions/ParserFunctions/ParserFunctions.php");

require_once( "$IP/extensions/TitleBlacklist/TitleBlacklist.php" );
$wgTitleBlacklistSources = array(
	array(
		'type' => TBLSRC_LOCALPAGE,
		'src'  => 'MediaWiki:Titleblacklist',
	),
);

include_once("$IP/extensions/Validator/Validator.php");
include_once("$IP/extensions/SemanticMediaWiki/SemanticMediaWiki.php");

include_once("$IP/extensions/SemanticForms/SemanticForms.php");

# SemanticResultFormats, an extra set of printers for SMW
require_once("$IP/extensions/SemanticResultFormats/SemanticResultFormats.php");

require_once( "Local.php" );
require_once( "Private.php" );
require_once( "Debug.php" );
