#!/bin/sh

export OS_USERNAME="osstackcanary"
export OS_PASSWORD="<%= @password %>"
export OS_REGION_NAME="<%= @region %>"
/usr/local/sbin/nova-fullstack \
    --ssh-timeout <%= @ssh_timeout %> \
    --puppet-timeout <%= @puppet_timeout %> \
    --creation-timeout <%= @creation_timeout %> \
    --interval <%= @interval %> \
    --max-pool <%= @max_pool %>  \
    --project admin-monitoring \
    --prepend fullstackd \
    --network <%= @network %> \
    --image debian-12.0-bookworm \
    --flavor g4.cores1.ram2.disk20 \
    --keyfile <%= @keyfile %> \
    --puppetmaster <%= @puppetmaster %> \
    --bastion-ip <%= @bastion_ip %> \
    --deployment <%= @deployment %> \
    --dns-resolvers <%= @resolvers.join(',') %> \
    --debug
