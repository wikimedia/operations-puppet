# Apache configuration for Phabricator (<%= @gitblit_servername %>)
# This file is managed by Puppet.

<VirtualHost *:80>
  ServerName <%= @gitblit_servername %>
<% if !@serveradmin.empty? -%>
  ServerAdmin <%= @serveradmin %>
<%- end %>

  <IfModule mod_remoteip.c>
    RemoteIPHeader X-Client-IP
    RemoteIPInternalProxy <%= @trusted_proxies.join(' ') %>
  </IfModule>

  RewriteEngine on

  LogLevel warn
  ErrorLog /var/log/apache2/phabricator_error.log
  CustomLog /var/log/apache2/phabricator_access.log wmf
  ServerSignature Off

</VirtualHost>
