# These custom values are hardcoded here to persist across Phabriactor Mediawiki installs.
# Values set here should only be default settings that apply to all installs.  Environment
# specific settings go in the role under manifests.  Changes to these settings usually
# require a phd daemon restart to be fully affective.  This message will show up as a banner
# in Phabricator but only for administrators.  If you do not have the ability to restart the
# associated daemons do not merge changes to this file.

ui.footer-items:
  - {name: 'Content licensed under Creative Commons Attribution-ShareAlike 3.0 (CC-BY-SA) unless otherwise noted; code licensed under GNU General Public License (GPL) or other open source licenses. By using this site, you agree to the Terms of Use and Privacy Policy.'}
  - {href: 'https://www.wikimediafoundation.org/', name: Wikimedia Foundation}
  - {href: 'https://wikimediafoundation.org/wiki/Privacy_policy', name: Privacy Policy}
  - {href: 'https://wikimediafoundation.org/wiki/Terms_of_Use/Phabricator', name: Terms of Use}
  - {href: 'https://wikimediafoundation.org/wiki/Wikimedia:General_disclaimer', name: Disclaimer}
  - {href: 'https://creativecommons.org/licenses/by-sa/3.0/', name: CC-BY-SA}
  - {href: 'https://www.gnu.org/licenses/old-licenses/gpl-2.0.html', name: GPL}

# Due to issues with 'gd' rending thumbnails for
# Mimetype image/x-icon and image/icon
# Disabling previews for icons for now
# https://secure.phabricator.com/T6573
files.viewable-mime-types:
  'image/jpeg': 'image/jpeg'
  'image/jpg': 'image/jpg'
  'image/png': 'image/png'
  'image/gif': 'image/gif'
  'text/plain': 'text/plain; charset=utf-8'
  'text/x-diff': 'text/plain; charset=utf-8'
  'image/vnd.microsoft.icon': 'image/x-icon'
  'audio/x-wav': 'audio/x-wav'
  'application/ogg': 'application/ogg'
  'audio/mpeg': 'audio/mpeg'
  'text/x-php': 'text/x-php'

files.image-mime-types:
    'image/jpeg': true
    'image/jpg': true
    'image/png': true
    'image/gif': true
    'image/vnd.microsoft.icon': true

maniphest.priorities:
  '100':
    name: 'Unbreak Now!'
    short: 'Unbreak!'
    color: indigo
    keywords: ['unbreak']
  '90':
    name: 'Needs Triage'
    short: Triage
    color: violet
    keywords: ['triage']
  '80':
    name: High
    short: High
    color: red
    keywords: ['high']
  '50':
    name: Normal
    short: Normal
    color: orange
    keywords: ['normal']
  '25':
    name: Low
    short: Low
    color: yellow
    keywords: ['low']
  '10':
    name: Lowest
    short: Lowest
    color: sky
    keywords: ['lowest']

# DO NOT CHANGE THESE VALUES.  Must be updated to match in security extensions.
maniphest.custom-field-definitions:
  external_reference:
    name: Reference
    type: text
    caption: Reference
    search: true
    edit: false
    view: true
  security_topic:
    instructions: Security settings will override permissions and projects as needed.
    name: Security
    description: Used for security oriented custom extensions
    search: true
    type: select
    default: default
    options:
      default: 'None'
      security-bug: 'Software security bug'
      sensitive: 'Other confidential issue'

# Security/Operations Macro's for enabling
# as we rollout to RT and bugzilla.
#ops-access-request: 'Operations Access Request'
#ops-sensitive: 'Operations Sensitive'
#sensitive: 'Another Private Issue'

maniphest.statuses:
  open:
    name: Open
    special: default
  stalled:
    name: 'Stalled'
    name.full: 'Open, Stalled'
    closed: false
    prefixes: [stalled]
    suffixes: ['as stalled']
  resolved:
    name: Resolved
    name.full: 'Closed, Resolved'
    closed: true
    special: closed
    prefixes: [closed, closes, close, fix, fixes, fixed, resolve, resolves, resolved]
    suffixes: ['as resolved', 'as fixed']
  invalid:
    name: Invalid
    name.full: "Closed, Invalid"
    closed: true
    prefixes: [invalidate, invalidates, invalidated]
    suffixes: ['as invalid']
  duplicate:
    name: Duplicate
    name.full: "Closed, Duplicate"
    transaction.icon: fa-times
    special: duplicate
    closed: true
  declined:
    name: Declined
    name.full: "Closed, Declined"
    name.action: Declined
    transaction.icon: fa-thumbs-o-down
    closed: true
    prefixes: [decline, declines, declined]
    suffixes: ['as declined']

user.custom-field-definitions:
  irc_nick:
    name: 'IRC Nick'
    type: text
    search: true

# make optional the 'real name' user profile field
user.require-real-name: false

# Allow the "view" policy setting of public to be available
policy.allow-public: true

# Adminstrators do not need to approve all accounts
auth.require-approval: false

# Require an email verification for all users
auth.require-email-verification: true

metamta.user-address-format: 'short'

# Modifies behavior of metamta.maniphest.reply-handler-domain
# Don't generate a unique reply hash per user, only per task
metamta.public-replies: true

# https://secure.phabricator.com/book/phabricator/article/configuring_file_storage/
# Needs to match php.ini upload_max_filesize
# Needs to match php.ini post_max_size for conduit
storage.mysql-engine.max-size: 10000000

phabricator.serious-business: true

# Replaces show-beta applications
phabricator.show-prototypes: true

metamta.mail-adapter: 'PhabricatorMailImplementationPHPMailerAdapter'

phpmailer.mailer: 'smtp'

phpmailer.smtp-port: '25'

# Do not try to call out for external resouces such as avatars
security.outbound-blacklist: ['0.0.0.0/0']

translation.override:
  'Execute Query': 'Search'
  'Maniphest Task': 'Task'
  'Pholio Mock': 'Mockup'
  'Real Name': 'Also Known As'
  # T33
  'Edit Blocking Tasks': "Edit 'Blocked By' Tasks"
  'Current Blocking Tasks': "Current 'Blocked By' Tasks"
  'Save Blocking Tasks': "Save 'Blocked By' Tasks"
  # T152, 257
  'Export to Excel': 'Export (disabled)'
  'Export Tasks to Excel': 'Export Tasks'
  'Do you want to export the query results to Excel?': 'Do you want to export the query results?'
  # T865
  'You can also create tasks by sending an email to: %s': 'You can also create tasks by sending an email to: %s (<a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Phabricator/Help#Using_e-mail" tabindex="-1" target="_blank">learn more</a>)'

# We don't host local docs or use the wiki :)
phabricator.uninstalled-applications:
  PhabricatorPhrictionApplication: true
  PhabricatorDivinerApplication: true

phd.pid-directory: "/var/run/phd/pid"
phd.log-directory: "/var/log/phd"
phd.user: 'phd'

diffusion.ssh-user: 'vcs'
pygments.enabled: true
