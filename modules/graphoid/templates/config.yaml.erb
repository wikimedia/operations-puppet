# Graphoid-specific settings

# List of domains the service is allowed to access (with their subdomains)
<% if @domains.empty? -%>
domains: []
<% else -%>
domains:
<%= @domains.map { |dom| '  - ' + dom }.join "\n" %>
<% end -%>

# Additional list of allowed domains with their replacements
# Even though the subdomains will also be allowed, the substitution
# will be done only on fully matched hostname.
# For example, it allows "graph.wmflabs.org" to be replaced with "localhost:12345"
<% if @domain_map.empty? -%>
domainMap: {}
<% else -%>
domainMap:
<%= @domain_map.keys.map { |k| "  '#{k}': '#{@domain_map[k]}'" }.join "\n" %>
<% end -%>

# Which protocol should service use for protocol-relative URLs like //example.com/path
defaultProtocol: <%= @protocol %>


# Allowed domains in the "protocol: [list of domains]" format
<% if @allowed_domains.empty? -%>
allowedDomains: {}
<% else -%>
allowedDomains:
<%= ZAML.dump(@allowed_domains).split("\n").map { |d| '  ' + d }.join("\n") %>
<% end -%>

# Error if it takes longer than this to handle the request
timeout: <%= @timeout %>
