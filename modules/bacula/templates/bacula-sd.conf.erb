# This file has been autogenerated by puppet. Don't edit by hand

# The directors allowed to contect to us
Director {
    Name = "<%= @director %>"
    Password = "<%= @directorpassword %>"
    # Have the Control channel encrypted. Used for incoming console connections
    TLS Enable = yes
    TLS Require = yes
    TLS CA Certificate File = "/var/lib/puppet/ssl/certs/ca.pem"
    TLS Verify Peer = no
    TLS Certificate = "/var/lib/puppet/ssl/certs/<%= @fqdn %>.pem"
    TLS Key = "/var/lib/puppet/ssl/private_keys/<%= @fqdn %>.pem"
}

Storage {
    Name = "<%= @fqdn %>-fd"
    SDport = <%= @sd_port %>
    WorkingDirectory = "/var/lib/bacula"
    Pid Directory = "/var/run/bacula"
    Maximum Concurrent Jobs = <%= @sd_max_concur_jobs %>
    Plugin Directory = "/usr/lib/bacula"
    # Do NOT Have the data channel encrypted.
    TLS Enable = no
    TLS Require = yes
    TLS CA Certificate File = "/var/lib/puppet/ssl/certs/ca.pem"
    TLS Verify Peer = yes
    TLS Certificate = "/var/lib/puppet/ssl/certs/<%= @fqdn %>.pem"
    TLS Key = "/var/lib/puppet/ssl/private_keys/<%= @fqdn %>.pem"
    # Heartbeat inverval = 0 # in secs
    # SDAddresses = # For director connections
}

# Send all messages except skipped files back to Director
Messages {
    Name = Standard
    director = "<%= @director %>" = all, !skipped, !restored
}

@|"sh -c 'for f in /etc/bacula/sd-devices.d/*.conf ; do echo @${f} ; done'"
