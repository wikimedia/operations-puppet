# carbon/cache
#
# carbon-cache.py listens for metrics on a network link, caches them in RAM,
# and flushes to disk periodically. Part of the Graphite suite.
#
description "Graphite metrics listener"

instance $NAME

stop on runlevel [!2345] or carbon.stop

setuid graphite
setgid graphite

# "--debug" makes carbon-* stay in the foreground and log to stdout, which
# allows Upstart to take care of daemonizing and logging.
exec /opt/graphite/bin/carbon-cache.py --instance "$NAME" --debug start

respawn
