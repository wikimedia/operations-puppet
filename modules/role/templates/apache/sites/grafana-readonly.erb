# Apache configuration for Grafana 2.
# This file is managed by Puppet.
<VirtualHost *:80>
  ServerName <%= @readonly_domain %>
  DocumentRoot /usr/share/grafana/public

  ProxyPreserveHost On
  ProxyPass / http://localhost:3000/
  ProxyPassReverse / http://localhost:3000/

  RequestHeader unset X-WEBAUTH-USER

  # Automatically log in all visitors as anonymous.
  RequestHeader set X-WEBAUTH-USER "Anonymous"

  <Proxy *>
    <Limit POST PUT DELETE>
      Require all denied
    </Limit>
  </Proxy>
</VirtualHost>
