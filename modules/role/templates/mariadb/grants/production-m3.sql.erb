-- start updating grants
-- haproxy@dbproxy1003

GRANT USAGE
    ON *.* TO 'haproxy'@'10.64.0.198';

-- haproxy@dbproxy1008

GRANT USAGE
    ON *.* TO 'haproxy'@'10.64.32.157';

-- phadmin@phab1001

GRANT USAGE
    ON *.* TO 'phadmin'@'10.64.16.8'
    IDENTIFIED BY '<%= @phab_admin_pass %>';

GRANT ALL PRIVILEGES
    ON `phabricator%`.* TO 'phadmin'@'10.64.16.8';

-- phadmin@phab1003

GRANT USAGE
    ON *.* TO 'phadmin'@'10.64.48.21'
    IDENTIFIED BY '<%= @phab_admin_pass %>';

GRANT ALL PRIVILEGES
    ON `phabricator%`.* TO 'phadmin'@'10.64.48.21';

-- phadmin@dbproxy1003
GRANT USAGE
    ON *.* TO 'phadmin'@'10.64.0.198'
    IDENTIFIED BY '<%= @phab_admin_pass %>';

GRANT ALL PRIVILEGES
    ON `phabricator%`.* TO 'phadmin'@'10.64.0.198';

-- phadmin@dbproxy1008
GRANT USAGE
    ON *.* TO 'phadmin'@'10.64.32.157'
    IDENTIFIED BY '<%= @phab_admin_pass %>';

GRANT ALL PRIVILEGES
    ON `phabricator%`.* TO 'phadmin'@'10.64.32.157';

-- phuser@phab1001

GRANT REPLICATION CLIENT
    ON *.* TO 'phuser'@'10.64.16.8'
    IDENTIFIED BY '<%= @phab_app_pass %>';

GRANT CREATE, DROP
    ON `phabricator_cache`.`cache_markupcache` TO 'phuser'@'10.64.16.8';

GRANT DELETE, EXECUTE, INSERT, SELECT, SHOW VIEW, UPDATE
    ON `phabricator%`.* TO 'phuser'@'10.64.16.8';

-- phuser@phab1003

GRANT REPLICATION CLIENT
    ON *.* TO 'phuser'@'10.64.48.21'
    IDENTIFIED BY '<%= @phab_app_pass %>';

GRANT CREATE, DROP
    ON `phabricator_cache`.`cache_markupcache` TO 'phuser'@'10.64.48.21';

GRANT DELETE, EXECUTE, INSERT, SELECT, SHOW VIEW, UPDATE
    ON `phabricator%`.* TO 'phuser'@'10.64.48.21';

-- phuser@dbproxy1003

GRANT REPLICATION CLIENT
    ON *.* TO 'phuser'@'10.64.0.198'
    IDENTIFIED BY '<%= @phab_app_pass %>';

GRANT CREATE, DROP
    ON `phabricator_cache`.`cache_markupcache` TO 'phuser'@'10.64.16.8';

GRANT CREATE, DROP
    ON `phabricator_cache`.`cache_markupcache` TO 'phuser'@'10.64.48.21';

GRANT DELETE, EXECUTE, INSERT, SELECT, SHOW VIEW, UPDATE
    ON `phabricator%`.* TO 'phuser'@'10.64.0.198';

-- phuser@dbproxy1008

GRANT REPLICATION CLIENT
    ON *.* TO 'phuser'@'10.64.32.157'
    IDENTIFIED BY '<%= @phab_app_pass %>';

GRANT CREATE, DROP
    ON `phabricator_cache`.`cache_markupcache` TO 'phuser'@'10.64.32.157';

GRANT DELETE, EXECUTE, INSERT, SELECT, SHOW VIEW, UPDATE
    ON `phabricator%`.* TO 'phuser'@'10.64.32.157';

-- phstats@phab1001

GRANT USAGE
    ON *.* TO 'phstats'@'10.64.16.8'
    IDENTIFIED BY '<%= @phab_metrics_pass %>';
GRANT SELECT ON `phabricator_maniphest`.* TO 'phstats'@'10.64.16.8';
GRANT SELECT ON `phabricator_user`.* TO 'phstats'@'10.64.16.8';
GRANT SELECT ON `phabricator_project`.* TO 'phstats'@'10.64.16.8';
GRANT SELECT ON `phabricator_differential`.* TO 'phstats'@'10.64.16.8';

-- phstats@phab1003

GRANT USAGE
    ON *.* TO 'phstats'@'10.64.48.21'
    IDENTIFIED BY '<%= @phab_metrics_pass %>';
GRANT SELECT ON `phabricator_maniphest`.* TO 'phstats'@'10.64.48.21';
GRANT SELECT ON `phabricator_user`.* TO 'phstats'@'10.64.48.21';
GRANT SELECT ON `phabricator_project`.* TO 'phstats'@'10.64.48.21';
GRANT SELECT ON `phabricator_differential`.* TO 'phstats'@'10.64.48.21';

-- phstats@dbproxy1003

GRANT USAGE
    ON *.* TO 'phstats'@'10.64.0.198'
    IDENTIFIED BY '<%= @phab_metrics_pass %>';
GRANT SELECT ON `phabricator_maniphest`.* TO 'phstats'@'10.64.0.198';
GRANT SELECT ON `phabricator_user`.* TO 'phstats'@'10.64.0.198';
GRANT SELECT ON `phabricator_project`.* TO 'phstats'@'10.64.0.198';
GRANT SELECT ON `phabricator_differential`.* TO 'phstats'@'10.64.0.198';

-- phstats@dbproxy1008

GRANT USAGE
    ON *.* TO 'phstats'@'10.64.32.157'
    IDENTIFIED BY '<%= @phab_metrics_pass %>';
GRANT SELECT ON `phabricator_maniphest`.* TO 'phstats'@'10.64.32.157';
GRANT SELECT ON `phabricator_user`.* TO 'phstats'@'10.64.32.157';
GRANT SELECT ON `phabricator_project`.* TO 'phstats'@'10.64.32.157';
GRANT SELECT ON `phabricator_differential`.* TO 'phstats'@'10.64.32.157';

-- phmanifest@phab1001

GRANT USAGE
    ON *.* TO 'phmanifest'@'10.64.16.8'
    IDENTIFIED BY '<%= @phab_manifest_pass %>';

GRANT SELECT
    ON `phabricator_maniphest`.* TO 'phmanifest'@'10.64.16.8';

-- phmanifest@phab1003

GRANT USAGE
    ON *.* TO 'phmanifest'@'10.64.48.21'
    IDENTIFIED BY '<%= @phab_manifest_pass %>';

GRANT SELECT
    ON `phabricator_maniphest`.* TO 'phmanifest'@'10.64.48.21';

-- phmanifest@dbproxy1003

GRANT USAGE
    ON *.* TO 'phmanifest'@'10.64.0.198'
    IDENTIFIED BY '<%= @phab_manifest_pass %>';

GRANT SELECT
    ON `phabricator_maniphest`.* TO 'phmanifest'@'10.64.0.198';

-- phmanifest@dbproxy1008

GRANT USAGE
    ON *.* TO 'phmanifest'@'10.64.32.157'
    IDENTIFIED BY '<%= @phab_manifest_pass %>';

GRANT SELECT
    ON `phabricator_maniphest`.* TO 'phmanifest'@'10.64.32.157';

-- bzmigrate@%
GRANT USAGE
    ON *.* TO 'bzmigrate'@'%'
    IDENTIFIED BY '<%= @phab_bz_pass %>';
GRANT ALL PRIVILEGES
    ON `bugzilla_migration`.* TO 'bzmigrate'@'%';

-- rtmigrate@%
GRANT USAGE
    ON *.* TO 'rtmigrate'@'%'
    IDENTIFIED BY '<%= @phab_rt_pass %>';
GRANT ALL PRIVILEGES
    ON `rt_migration`.* TO 'rtmigrate'@'%';
