#!/bin/bash
#
# THIS FILE IS MAINTAINED BY PUPPET
# source: modules/toollabs/files/maintainers
# from:   toollabs::mailrelay
#

/usr/bin/ldapsearch -D "$(sed -ne 's/^binddn\s\+\(.*\)$/\1/p;' /etc/ldap.conf)" -w "$(sed -ne 's/^bindpw\s\+\(.*\)$/\1/p;' /etc/ldap.conf)" -b "cn=$1,ou=servicegroups,dc=wikimedia,dc=org" -LLL -o ldif-wrap=no member | sed -ne 's/^member: uid=\(.*\),ou=people,\(ou=servicegroups,\)\?dc=wikimedia,dc=org$/\1/p;'
