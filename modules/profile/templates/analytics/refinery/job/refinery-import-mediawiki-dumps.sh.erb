#!/bin/bash
<%#- SPDX-License-Identifier: Apache-2.0 -%>
# NOTE: This file is managed by puppet
#

export PYTHONPATH=\${PYTHONPATH}:<%= @refinery_path %>/python

/usr/bin/python3 <%= @refinery_path %>/bin/import-mediawiki-dumps \
    --input-base  <%= @input_directory_base %> \
    --output-base <%= @output_directory_base %> \
    --projects-file <%= @wiki_file %> \
    <%- if @skip_list -%>
    --skip-list <%= @skip_list %> \
    <%- end -%>
    --dump-type <%= @dump_type %> \
    <%- if @success_flag -%>
    --success-flag <%= @success_flag %> \
    <%- end -%>
    --log-file <%= @log_file %> \
    --dump-date $(/bin/date +'%Y%m01')
