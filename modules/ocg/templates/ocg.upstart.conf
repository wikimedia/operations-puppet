# vim: set ft=upstart:

#####################################################################
### THIS FILE IS MANAGED BY PUPPET
### /modules/ocg/templates/ocg.upstart.conf.erb
#####################################################################

# Upstart configuration file for the MediaWiki Collection extension OCG

description "MediaWiki Collection Offline Content Generator"

start on (local-filesystems and net-device-up IFACE!=lo)
stop on runlevel [!2345]

setuid ocg
setgid ocg

script
    PATH=$PATH:"<%= @deploy_path %>/node_modules/.bin"
    mw-ocg-service -c /etc/ocg/mw-ocg-service.js
end script

respawn
