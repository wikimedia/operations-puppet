# This file is managed by puppet, not the ops/dns repo!
# This whole file becomes contents of the options stanza of the final
# production configuration.  The stuff in the operations/dns repo owns the
# top-level config file which includes this!

listen = any
http_listen = [ 127.0.0.1, ::1 ],
zones_strict_data = true,
zones_default_ttl = 3600,
# don't inotify on zonefiles but wait for HUP
zones_rfc1035_auto = false,

# Use multiple threads-per-socket, makes handling
#  query-rate spikes even easier.
# Note this will only take effect on kernels >= 3.9 (trusty),
#  on others it will be bumped back to 1 at runtime by
#  the daemon for lack of SO_REUSEPORT support.
udp_threads = <%= @physicalcorecount %>
tcp_threads = <%= @physicalcorecount %>

# Experiment: raise tcp timeout from default 15 to 50, see if this has any
# notable impact on connection stats (close_c vs close_s_ok):
tcp_timeout = 50
