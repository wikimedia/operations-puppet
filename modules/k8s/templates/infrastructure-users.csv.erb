<%#- SPDX-License-Identifier: Apache-2.0 -%>
<%#
  This generates a "static-token-file" as described in:
  https://kubernetes.io/docs/reference/access-authn-authz/authentication/#static-token-file
  The token file is a csv file with a minimum of 3 columns:
  token, user name, user uid, followed by group names as a quoted, comma seperated list.
-%>
<%-
  @users.each do |k, v|
    entry = "#{v['token']},#{k},#{k},\"#{v.fetch('groups', ['deploy']).join(',')}\""
-%>
<%= entry %>
<%- end -%>
