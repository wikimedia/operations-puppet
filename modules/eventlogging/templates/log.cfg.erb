[loggers]
keys=root, kafka, pykafka, kazoo, tornado_access, tornado_application, tornado_general

[handlers]
keys=syslog<%= ', logstash' if @logstash_host %>

[formatters]
keys=syslog


### Loggers ###

[logger_root]
level=INFO
handlers=syslog<%= ', logstash' if @logstash_host %>

[logger_kafka]
level=INFO
qualname=kafka
handlers=

[logger_pykafka]
level=INFO
qualname=pykafka
handlers=

[logger_kazoo]
level=INFO
qualname=kazoo
handlers=

[logger_tornado_access]
level=<%= @access_log_level ? @access_log_level : 'WARNING' %>
qualname=tornado.access
handlers=

[logger_tornado_application]
level=INFO
qualname=tornado.application
handlers=

[logger_tornado_general]
level=INFO
qualname=tornado.general
handlers=


### Formatters ###

[formatter_syslog]
# Must prepend syslog logs with name of this instance
# so that it can be matched with rsyslog using $programname.
format=<%= @service_name %>[%(process)d]: (%(threadName)-10s) %(message)s

### Output Handlers ###

[handler_syslog]
class=logging.handlers.SysLogHandler
level=INFO
formatter=syslog
args=('/dev/log',)

<% if @logstash_host -%>
[handler_logstash]
class=logstash.LogstashHandler
level=INFO
# Args to pass to LogstashHander constructor: (host, port, message_type, tags), see:
# https://github.com/vklochan/python-logstash/blob/master/logstash/handler_tcp.py
args=('<%= @logstash_host %>', <%= @logstash_port %>, 'logstash', <%= Array(@logstash_tags).sort.to_s if @logstash_tags %>)
<% end -%>
