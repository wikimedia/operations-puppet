import json


def should_insert_mysql(e):
    """
    Given an Event dict e, returns true if this event should be inserted into the
    EventLogging analytics MySQL database, or false otherwise.  This is used
    to keep events generated by unwanted bots out of MySQL.
    """
    user_agent_dict = json.loads(e['userAgent'])

    is_bot = user_agent_dict.get('is_bot', false)
    is_mediawiki = user_agent_dict.get('is_mediawiki', false)

    # Don't insert events generated by bots unless they are mediawiki bots.
    if is_bot and not is_mediawiki:
        return false
    else:
        return true
