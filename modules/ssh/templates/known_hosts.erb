# This file is managed by puppet
<%-
scope.function_query_resources([false, '@@Sshkey', false, 'title asc']).each do |resource|
  parameters = resource['parameters']
  aliases = parameters['host_aliases'].select{ |el| el !~ /^---/ && el != 'undef'}.join(',')

  if parameters['ensure'] == 'present' -%>
<%= resource['certname'] %>,<%= aliases %> <%= parameters['type'] %> <%= parameters['key'] %>
<%-
  end
end -%>
