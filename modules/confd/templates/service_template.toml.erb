<%#- SPDX-License-Identifier: Apache-2.0 -%>
<%-
prefix = "#{scope.lookupvar('confd::prefix')}#{@prefix}"
-%>
# This file is managed by Puppet!
# Confd config file for <%= @name %>

[template]
src = "<%= @safe_name %>.tmpl"
dest = "<%= @name %>"
<% if @uid %>uid = <%= @uid %><% end %>
<% if @gid %>gid = <%= @gid %><% end %>
mode = "<%= @mode %>"

keys = [
    <% @watch_keys.each do |key| -%>
    "<%= key %>",
    <% end -%>
]

<% if prefix != "" %>prefix = "<%= prefix %>"<% end %>
<% if @check %>check_cmd = "/usr/local/bin/confd-lint-wrap <%= @check %> {{.src}}"<% end %>
<% if @reload %>reload_cmd = "<%= @reload %>"<% end %>
