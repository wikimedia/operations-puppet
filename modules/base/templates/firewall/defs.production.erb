<%-
external_networks = scope.lookupvar('network::constants::external_networks')
all_networks = scope.lookupvar('network::constants::all_networks')
all_network_subnets = scope.lookupvar('network::constants::all_network_subnets')
-%>

@def $EXTERNAL_NETWORKS = (<%- external_networks.each do |external_net| -%><%= external_net %> <% end -%>);
@def $ALL_NETWORKS = (<%- all_networks.each do |net| -%><%= net %> <% end -%>);
<%- all_network_subnets.each_pair do |realm, sites| -%>
	<%- sites.each_pair do |site, spheres| -%>
		<%- spheres.each_pair do |sphere, networks | -%>
			<%- networks.each_pair do |network, families| -%>

# Realm: <%= realm %>, # Site: <%= site %>, # Sphere: <%= sphere %>, # Network: <%= network %>
				<%-
       				descr = "#{site.upcase()}_#{sphere.upcase()}_#{network.upcase()}"
				familydescrs = Array.new()
				families.each_pair do |family, address|
					familydescr = "#{descr}_#{family.upcase()}"
					familydescrs << familydescr -%>
@def $<%= familydescr %> = (<%= address %>);
				<%- end -%>
@def $<%= descr %> = (<%- familydescrs.each do |fd|%>$<%= fd %> <% end -%>);
			<%- end -%>
		<%- end -%>
	<%- end -%>
<%- end -%>

@def $INTERNAL_V4 = (10.0.0.0/8);
@def $INTERNAL_V6 = (2620:0:100::/56);
@def $INTERNAL = ($INTERNAL_V4 $INTERNAL_V6);

# Specific hosts
@def $BASTION_V4 = (208.80.152.165 208.80.154.149 91.198.174.113 198.35.26.5);
@def $BASTION_V6 = (2620:0:860:2:21e:c9ff:feea:ab95 2620:0:861:2:7a2b:cbff:fe09:11ba 2620:0:862:1:a6ba:dbff:fe30:d770);
@def $BASTION = ($BASTION_V4 $BASTION_V6);

@def $ICINGA_V4 = (208.80.154.14);
@def $ICINGA_V6 = (2620:0:861:1:7a2b:cbff:fe08:a42f);
@def $ICINGA = ($ICINGA_V4 $ICINGA_V6);
