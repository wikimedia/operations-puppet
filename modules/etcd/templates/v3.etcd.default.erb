## etcd(1) daemon options
## See "/usr/share/doc/etcd/Documentation/configuration.md.gz".
<%- etcd_version = Gem::Version.new(@facts.fetch('etcd_version', '0.a')) -%>

### Member Flags
ETCD_NAME="<%= @member_name %>"
ETCD_DATA_DIR="<%= @data_dir %>"
ETCD_SNAPSHOT_COUNT="<%= @snapshot_count %>"

### Cluster Flags
ETCD_HEARTBEAT_INTERVAL="<%= @heartbeat_interval %>"
ETCD_ELECTION_TIMEOUT="<%= @election_timeout %>"
ETCD_LISTEN_PEER_URLS="<%= @peer_url %>"
ETCD_INITIAL_ADVERTISE_PEER_URLS="<%= @adv_peer_url %>"
ETCD_LISTEN_CLIENT_URLS="<%= @client_url %>"
ETCD_ADVERTISE_CLIENT_URLS="<%= @adv_client_url %>"
ETCD_INITIAL_CLUSTER_STATE="<%= @cluster_state %>"
<%- if @peers_list -%>
ETCD_INITIAL_CLUSTER="<%= @peers_list %>"
<%- else -%>
ETCD_DISCOVERY_SRV="<%= @srv_dns %>"
ETCD_DISCOVERY_FALLBACK="exit"
<%- end -%>
ETCD_INITIAL_CLUSTER_TOKEN="<%= @cluster_name %>"
### Security Flags
ETCD_CERT_FILE="<%= @client_cert %>"
ETCD_KEY_FILE="<%= @client_key %>"
ETCD_CLIENT_CERT_AUTH=<%= @use_client_certs %>
<%#=
Since etcd 3.4, setting --trusted-ca-file will also automatically enable
client cert authentication no matter what value is set for --client-cert-auth
https://etcd.io/docs/v3.4/op-guide/configuration/#--trusted-ca-file
-%>
<%- if etcd_version < Gem::Version.new('3.4') or @use_client_certs -%>
ETCD_TRUSTED_CA_FILE="<%= @trusted_ca %>"
<%- end -%>
ETCD_PEER_TRUSTED_CA_FILE="<%= @trusted_ca %>"
ETCD_PEER_CERT_FILE="<%= @peer_cert %>"
ETCD_PEER_KEY_FILE="<%= @peer_key %>"
ETCD_PEER_CLIENT_CERT_AUTH=true


### Logging Flags
## Drop the default log level to DEBUG for all subpackages.
# ETCD_DEBUG
## Set individual etcd subpackages to specific log levels.
## An example being `etcdserver=WARNING,security=DEBUG`
## default: none (INFO for all packages)
# ETCD_LOG_PACKAGE_LEVELS
#### Daemon parameters:
# DAEMON_ARGS=""
