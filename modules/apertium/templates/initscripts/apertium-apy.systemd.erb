# NOTE: This file is managed by Puppet
# Systemd unit for <%= @title %>
[Unit]
Description="<%= @title %> service"

[Service]
# up ulimit -n a bit
User=apertium
Group=apertium
Restart=always
RestartSec=2s
# wait 60 seconds for a graceful restart before killing the master
TimeoutStopSec=60
WorkingDirectory=/srv/deployment/<%= @title %>/deploy
ExecStart=/usr/bin/python3 /usr/share/apertium-apy/servlet.py -j<%= @num_of_processes %> -m<%= @max_idle_seconds %> /usr/share/apertium/modes

[Install]
WantedBy=multi-user.target
