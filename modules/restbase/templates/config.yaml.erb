# RESTBase wikimedia config

# First, load & parametrize project templates. These are referenced / shared
# between domains in the root_spec further down.
default_project: &default_project
  x-modules:
    /:
      - path: projects/wmf_default.yaml
        options: &default_options
          table:
            hosts: [<%= Array(@seeds).join(',') %>]
            keyspace: system
            localDc: <%= @cassandra_localDc %>
            datacenters: [<%= Array(@cassandra_datacenters).join(',') %>]
            username: <%= @cassandra_user %>
            password: <%= @cassandra_password %>
            defaultConsistency: <%= @cassandra_defaultConsistency %>
            storage_groups:
              - name: phase0.group.local
                domains:
                  - /^(?:test.*\.wiki.*\.org|www.mediawiki.org)$/
              - name: wikipedia.group.local
                domains: /\.wikipedia\.org$/
              - name: wikimedia.group.local
                domains: /\.wikimedia\.org$/
              - name: wiktionary.group.local
                domains: /\.wiktionary\.org$/
              - name: wikibooks.group.local
                domains: /\.wikibooks\.org$/
              - name: wikisource.group.local
                domains: /\.wikisource\.org$/
              - name: wikiquote.group.local
                domains: /\.wikiquote\.org$/
              - name: wikinews.group.local
                domains: /\.wikinews\.org$/
              - name: wikiversity.group.local
                domains: /\.wikiversity\.org$/
              - name: wikivoyage.group.local
                domains: /\.wikivoyage\.org$/
              - name: globaldomain.group.local
                domains: /^wikimedia\.org$/
              # Catch-all group
              - name: default.group.local
                domains: /./

          parsoid:
            host: <%= @parsoid_uri %>
          action:
            apiUriTemplate: http://api.svc.eqiad.wmnet/w/api.php
          graphoid:
            host: <%= @graphoid_uri %>
          mathoid:
            host: <%= @mathoid_uri %>
            # 10 days Varnish caching, one day client-side
            cache-control: s-maxage=864000, max-age=86400
          mobileapps:
            host: <%= @mobileapps_uri %>

# A different project template, sharing configuration options.
wikimedia.org: &wikimedia.org
  x-modules:
    /:
      - path: projects/wikimedia.org.yaml
        options:
            <<: *default_options
            pageviews:
              host: <%= @aqs_uri %>


# Swagger spec root.
root_spec: &root_spec
  title: "The RESTBase root"
  # Some more general RESTBase info
  paths:

    # wikipedia
    /{domain:ab.wikipedia.org}: *default_project
    /{domain:ace.wikipedia.org}: *default_project
    /{domain:af.wikipedia.org}: *default_project
    /{domain:ak.wikipedia.org}: *default_project
    /{domain:als.wikipedia.org}: *default_project
    /{domain:am.wikipedia.org}: *default_project
    /{domain:an.wikipedia.org}: *default_project
    /{domain:ang.wikipedia.org}: *default_project
    /{domain:ar.wikipedia.org}: *default_project
    /{domain:arc.wikipedia.org}: *default_project
    /{domain:arz.wikipedia.org}: *default_project
    /{domain:as.wikipedia.org}: *default_project
    /{domain:ast.wikipedia.org}: *default_project
    /{domain:av.wikipedia.org}: *default_project
    /{domain:ay.wikipedia.org}: *default_project
    /{domain:az.wikipedia.org}: *default_project
    /{domain:azb.wikipedia.org}: *default_project
    /{domain:ba.wikipedia.org}: *default_project
    /{domain:bar.wikipedia.org}: *default_project
    /{domain:bat-smg.wikipedia.org}: *default_project
    /{domain:bcl.wikipedia.org}: *default_project
    /{domain:be.wikipedia.org}: *default_project
    /{domain:be-tarask.wikipedia.org}: *default_project
    /{domain:bg.wikipedia.org}: *default_project
    /{domain:bh.wikipedia.org}: *default_project
    /{domain:bi.wikipedia.org}: *default_project
    /{domain:bjn.wikipedia.org}: *default_project
    /{domain:bm.wikipedia.org}: *default_project
    /{domain:bn.wikipedia.org}: *default_project
    /{domain:bo.wikipedia.org}: *default_project
    /{domain:bpy.wikipedia.org}: *default_project
    /{domain:br.wikipedia.org}: *default_project
    /{domain:bs.wikipedia.org}: *default_project
    /{domain:bug.wikipedia.org}: *default_project
    /{domain:bxr.wikipedia.org}: *default_project
    /{domain:ca.wikipedia.org}: *default_project
    /{domain:cbk-zam.wikipedia.org}: *default_project
    /{domain:cdo.wikipedia.org}: *default_project
    /{domain:ce.wikipedia.org}: *default_project
    /{domain:ceb.wikipedia.org}: *default_project
    /{domain:ch.wikipedia.org}: *default_project
    /{domain:chr.wikipedia.org}: *default_project
    /{domain:chy.wikipedia.org}: *default_project
    /{domain:ckb.wikipedia.org}: *default_project
    /{domain:co.wikipedia.org}: *default_project
    /{domain:cr.wikipedia.org}: *default_project
    /{domain:crh.wikipedia.org}: *default_project
    /{domain:cs.wikipedia.org}: *default_project
    /{domain:csb.wikipedia.org}: *default_project
    /{domain:cu.wikipedia.org}: *default_project
    /{domain:cv.wikipedia.org}: *default_project
    /{domain:cy.wikipedia.org}: *default_project
    /{domain:da.wikipedia.org}: *default_project
    /{domain:de.wikipedia.org}: *default_project
    /{domain:diq.wikipedia.org}: *default_project
    /{domain:dsb.wikipedia.org}: *default_project
    /{domain:dv.wikipedia.org}: *default_project
    /{domain:dz.wikipedia.org}: *default_project
    /{domain:ee.wikipedia.org}: *default_project
    /{domain:el.wikipedia.org}: *default_project
    /{domain:eml.wikipedia.org}: *default_project
    /{domain:en.wikipedia.org}: *default_project
    /{domain:eo.wikipedia.org}: *default_project
    /{domain:es.wikipedia.org}: *default_project
    /{domain:et.wikipedia.org}: *default_project
    /{domain:eu.wikipedia.org}: *default_project
    /{domain:ext.wikipedia.org}: *default_project
    /{domain:fa.wikipedia.org}: *default_project
    /{domain:ff.wikipedia.org}: *default_project
    /{domain:fi.wikipedia.org}: *default_project
    /{domain:fiu-vro.wikipedia.org}: *default_project
    /{domain:fj.wikipedia.org}: *default_project
    /{domain:fo.wikipedia.org}: *default_project
    /{domain:fr.wikipedia.org}: *default_project
    /{domain:frp.wikipedia.org}: *default_project
    /{domain:frr.wikipedia.org}: *default_project
    /{domain:fur.wikipedia.org}: *default_project
    /{domain:fy.wikipedia.org}: *default_project
    /{domain:ga.wikipedia.org}: *default_project
    /{domain:gag.wikipedia.org}: *default_project
    /{domain:gan.wikipedia.org}: *default_project
    /{domain:gd.wikipedia.org}: *default_project
    /{domain:gl.wikipedia.org}: *default_project
    /{domain:glk.wikipedia.org}: *default_project
    /{domain:gn.wikipedia.org}: *default_project
    /{domain:gom.wikipedia.org}: *default_project
    /{domain:got.wikipedia.org}: *default_project
    /{domain:gu.wikipedia.org}: *default_project
    /{domain:gv.wikipedia.org}: *default_project
    /{domain:ha.wikipedia.org}: *default_project
    /{domain:hak.wikipedia.org}: *default_project
    /{domain:haw.wikipedia.org}: *default_project
    /{domain:he.wikipedia.org}: *default_project
    /{domain:hi.wikipedia.org}: *default_project
    /{domain:hif.wikipedia.org}: *default_project
    /{domain:hr.wikipedia.org}: *default_project
    /{domain:hsb.wikipedia.org}: *default_project
    /{domain:ht.wikipedia.org}: *default_project
    /{domain:hu.wikipedia.org}: *default_project
    /{domain:hy.wikipedia.org}: *default_project
    /{domain:ia.wikipedia.org}: *default_project
    /{domain:id.wikipedia.org}: *default_project
    /{domain:ie.wikipedia.org}: *default_project
    /{domain:ig.wikipedia.org}: *default_project
    /{domain:ik.wikipedia.org}: *default_project
    /{domain:ilo.wikipedia.org}: *default_project
    /{domain:io.wikipedia.org}: *default_project
    /{domain:is.wikipedia.org}: *default_project
    /{domain:it.wikipedia.org}: *default_project
    /{domain:iu.wikipedia.org}: *default_project
    /{domain:ja.wikipedia.org}: *default_project
    /{domain:jbo.wikipedia.org}: *default_project
    /{domain:jv.wikipedia.org}: *default_project
    /{domain:ka.wikipedia.org}: *default_project
    /{domain:kaa.wikipedia.org}: *default_project
    /{domain:kab.wikipedia.org}: *default_project
    /{domain:kbd.wikipedia.org}: *default_project
    /{domain:kg.wikipedia.org}: *default_project
    /{domain:ki.wikipedia.org}: *default_project
    /{domain:kk.wikipedia.org}: *default_project
    /{domain:kl.wikipedia.org}: *default_project
    /{domain:km.wikipedia.org}: *default_project
    /{domain:kn.wikipedia.org}: *default_project
    /{domain:ko.wikipedia.org}: *default_project
    /{domain:koi.wikipedia.org}: *default_project
    /{domain:krc.wikipedia.org}: *default_project
    /{domain:ks.wikipedia.org}: *default_project
    /{domain:ksh.wikipedia.org}: *default_project
    /{domain:ku.wikipedia.org}: *default_project
    /{domain:kv.wikipedia.org}: *default_project
    /{domain:kw.wikipedia.org}: *default_project
    /{domain:ky.wikipedia.org}: *default_project
    /{domain:la.wikipedia.org}: *default_project
    /{domain:lad.wikipedia.org}: *default_project
    /{domain:lb.wikipedia.org}: *default_project
    /{domain:lbe.wikipedia.org}: *default_project
    /{domain:lez.wikipedia.org}: *default_project
    /{domain:lg.wikipedia.org}: *default_project
    /{domain:li.wikipedia.org}: *default_project
    /{domain:lij.wikipedia.org}: *default_project
    /{domain:lmo.wikipedia.org}: *default_project
    /{domain:ln.wikipedia.org}: *default_project
    /{domain:lo.wikipedia.org}: *default_project
    /{domain:lrc.wikipedia.org}: *default_project
    /{domain:lt.wikipedia.org}: *default_project
    /{domain:ltg.wikipedia.org}: *default_project
    /{domain:lv.wikipedia.org}: *default_project
    /{domain:mai.wikipedia.org}: *default_project
    /{domain:map-bms.wikipedia.org}: *default_project
    /{domain:mdf.wikipedia.org}: *default_project
    /{domain:mg.wikipedia.org}: *default_project
    /{domain:mhr.wikipedia.org}: *default_project
    /{domain:mi.wikipedia.org}: *default_project
    /{domain:min.wikipedia.org}: *default_project
    /{domain:mk.wikipedia.org}: *default_project
    /{domain:ml.wikipedia.org}: *default_project
    /{domain:mn.wikipedia.org}: *default_project
    /{domain:mr.wikipedia.org}: *default_project
    /{domain:mrj.wikipedia.org}: *default_project
    /{domain:ms.wikipedia.org}: *default_project
    /{domain:mt.wikipedia.org}: *default_project
    /{domain:mwl.wikipedia.org}: *default_project
    /{domain:my.wikipedia.org}: *default_project
    /{domain:myv.wikipedia.org}: *default_project
    /{domain:mzn.wikipedia.org}: *default_project
    /{domain:na.wikipedia.org}: *default_project
    /{domain:nah.wikipedia.org}: *default_project
    /{domain:nap.wikipedia.org}: *default_project
    /{domain:nds.wikipedia.org}: *default_project
    /{domain:nds-nl.wikipedia.org}: *default_project
    /{domain:ne.wikipedia.org}: *default_project
    /{domain:new.wikipedia.org}: *default_project
    /{domain:nl.wikipedia.org}: *default_project
    /{domain:nn.wikipedia.org}: *default_project
    /{domain:no.wikipedia.org}: *default_project
    /{domain:nov.wikipedia.org}: *default_project
    /{domain:nrm.wikipedia.org}: *default_project
    /{domain:nso.wikipedia.org}: *default_project
    /{domain:nv.wikipedia.org}: *default_project
    /{domain:ny.wikipedia.org}: *default_project
    /{domain:oc.wikipedia.org}: *default_project
    /{domain:om.wikipedia.org}: *default_project
    /{domain:or.wikipedia.org}: *default_project
    /{domain:os.wikipedia.org}: *default_project
    /{domain:pa.wikipedia.org}: *default_project
    /{domain:pag.wikipedia.org}: *default_project
    /{domain:pam.wikipedia.org}: *default_project
    /{domain:pap.wikipedia.org}: *default_project
    /{domain:pcd.wikipedia.org}: *default_project
    /{domain:pdc.wikipedia.org}: *default_project
    /{domain:pfl.wikipedia.org}: *default_project
    /{domain:pi.wikipedia.org}: *default_project
    /{domain:pih.wikipedia.org}: *default_project
    /{domain:pl.wikipedia.org}: *default_project
    /{domain:pms.wikipedia.org}: *default_project
    /{domain:pnb.wikipedia.org}: *default_project
    /{domain:pnt.wikipedia.org}: *default_project
    /{domain:ps.wikipedia.org}: *default_project
    /{domain:pt.wikipedia.org}: *default_project
    /{domain:qu.wikipedia.org}: *default_project
    /{domain:rm.wikipedia.org}: *default_project
    /{domain:rmy.wikipedia.org}: *default_project
    /{domain:rn.wikipedia.org}: *default_project
    /{domain:ro.wikipedia.org}: *default_project
    /{domain:roa-rup.wikipedia.org}: *default_project
    /{domain:roa-tara.wikipedia.org}: *default_project
    /{domain:ru.wikipedia.org}: *default_project
    /{domain:rue.wikipedia.org}: *default_project
    /{domain:rw.wikipedia.org}: *default_project
    /{domain:sa.wikipedia.org}: *default_project
    /{domain:sah.wikipedia.org}: *default_project
    /{domain:sc.wikipedia.org}: *default_project
    /{domain:scn.wikipedia.org}: *default_project
    /{domain:sco.wikipedia.org}: *default_project
    /{domain:sd.wikipedia.org}: *default_project
    /{domain:se.wikipedia.org}: *default_project
    /{domain:sg.wikipedia.org}: *default_project
    /{domain:sh.wikipedia.org}: *default_project
    /{domain:si.wikipedia.org}: *default_project
    /{domain:simple.wikipedia.org}: *default_project
    /{domain:sk.wikipedia.org}: *default_project
    /{domain:sl.wikipedia.org}: *default_project
    /{domain:sm.wikipedia.org}: *default_project
    /{domain:sn.wikipedia.org}: *default_project
    /{domain:so.wikipedia.org}: *default_project
    /{domain:sq.wikipedia.org}: *default_project
    /{domain:sr.wikipedia.org}: *default_project
    /{domain:srn.wikipedia.org}: *default_project
    /{domain:ss.wikipedia.org}: *default_project
    /{domain:st.wikipedia.org}: *default_project
    /{domain:stq.wikipedia.org}: *default_project
    /{domain:su.wikipedia.org}: *default_project
    /{domain:sv.wikipedia.org}: *default_project
    /{domain:sw.wikipedia.org}: *default_project
    /{domain:szl.wikipedia.org}: *default_project
    /{domain:ta.wikipedia.org}: *default_project
    /{domain:te.wikipedia.org}: *default_project
    /{domain:tet.wikipedia.org}: *default_project
    /{domain:tg.wikipedia.org}: *default_project
    /{domain:th.wikipedia.org}: *default_project
    /{domain:ti.wikipedia.org}: *default_project
    /{domain:tk.wikipedia.org}: *default_project
    /{domain:tl.wikipedia.org}: *default_project
    /{domain:tn.wikipedia.org}: *default_project
    /{domain:to.wikipedia.org}: *default_project
    /{domain:tpi.wikipedia.org}: *default_project
    /{domain:tr.wikipedia.org}: *default_project
    /{domain:ts.wikipedia.org}: *default_project
    /{domain:tt.wikipedia.org}: *default_project
    /{domain:tum.wikipedia.org}: *default_project
    /{domain:tw.wikipedia.org}: *default_project
    /{domain:ty.wikipedia.org}: *default_project
    /{domain:tyv.wikipedia.org}: *default_project
    /{domain:udm.wikipedia.org}: *default_project
    /{domain:ug.wikipedia.org}: *default_project
    /{domain:uk.wikipedia.org}: *default_project
    /{domain:ur.wikipedia.org}: *default_project
    /{domain:uz.wikipedia.org}: *default_project
    /{domain:ve.wikipedia.org}: *default_project
    /{domain:vec.wikipedia.org}: *default_project
    /{domain:vep.wikipedia.org}: *default_project
    /{domain:vi.wikipedia.org}: *default_project
    /{domain:vls.wikipedia.org}: *default_project
    /{domain:vo.wikipedia.org}: *default_project
    /{domain:wa.wikipedia.org}: *default_project
    /{domain:war.wikipedia.org}: *default_project
    /{domain:wo.wikipedia.org}: *default_project
    /{domain:wuu.wikipedia.org}: *default_project
    /{domain:xal.wikipedia.org}: *default_project
    /{domain:xh.wikipedia.org}: *default_project
    /{domain:xmf.wikipedia.org}: *default_project
    /{domain:yi.wikipedia.org}: *default_project
    /{domain:yo.wikipedia.org}: *default_project
    /{domain:za.wikipedia.org}: *default_project
    /{domain:zea.wikipedia.org}: *default_project
    /{domain:zh.wikipedia.org}: *default_project
    /{domain:zh-classical.wikipedia.org}: *default_project
    /{domain:zh-min-nan.wikipedia.org}: *default_project
    /{domain:zh-yue.wikipedia.org}: *default_project
    /{domain:zu.wikipedia.org}: *default_project
    /{domain:nostalgia.wikipedia.org}: *default_project
    /{domain:test.wikipedia.org}: *default_project
    /{domain:test2.wikipedia.org}: *default_project

    # Wiktionary
    /{domain:af.wiktionary.org}: *default_project
    /{domain:am.wiktionary.org}: *default_project
    /{domain:an.wiktionary.org}: *default_project
    /{domain:ang.wiktionary.org}: *default_project
    /{domain:ar.wiktionary.org}: *default_project
    /{domain:ast.wiktionary.org}: *default_project
    /{domain:ay.wiktionary.org}: *default_project
    /{domain:az.wiktionary.org}: *default_project
    /{domain:be.wiktionary.org}: *default_project
    /{domain:bg.wiktionary.org}: *default_project
    /{domain:bn.wiktionary.org}: *default_project
    /{domain:br.wiktionary.org}: *default_project
    /{domain:bs.wiktionary.org}: *default_project
    /{domain:ca.wiktionary.org}: *default_project
    /{domain:chr.wiktionary.org}: *default_project
    /{domain:co.wiktionary.org}: *default_project
    /{domain:cs.wiktionary.org}: *default_project
    /{domain:csb.wiktionary.org}: *default_project
    /{domain:cy.wiktionary.org}: *default_project
    /{domain:da.wiktionary.org}: *default_project
    /{domain:de.wiktionary.org}: *default_project
    /{domain:dv.wiktionary.org}: *default_project
    /{domain:el.wiktionary.org}: *default_project
    /{domain:en.wiktionary.org}: *default_project
    /{domain:eo.wiktionary.org}: *default_project
    /{domain:es.wiktionary.org}: *default_project
    /{domain:et.wiktionary.org}: *default_project
    /{domain:eu.wiktionary.org}: *default_project
    /{domain:fa.wiktionary.org}: *default_project
    /{domain:fi.wiktionary.org}: *default_project
    /{domain:fj.wiktionary.org}: *default_project
    /{domain:fo.wiktionary.org}: *default_project
    /{domain:fr.wiktionary.org}: *default_project
    /{domain:fy.wiktionary.org}: *default_project
    /{domain:ga.wiktionary.org}: *default_project
    /{domain:gd.wiktionary.org}: *default_project
    /{domain:gl.wiktionary.org}: *default_project
    /{domain:gn.wiktionary.org}: *default_project
    /{domain:gu.wiktionary.org}: *default_project
    /{domain:gv.wiktionary.org}: *default_project
    /{domain:ha.wiktionary.org}: *default_project
    /{domain:he.wiktionary.org}: *default_project
    /{domain:hi.wiktionary.org}: *default_project
    /{domain:hr.wiktionary.org}: *default_project
    /{domain:hsb.wiktionary.org}: *default_project
    /{domain:hu.wiktionary.org}: *default_project
    /{domain:hy.wiktionary.org}: *default_project
    /{domain:ia.wiktionary.org}: *default_project
    /{domain:id.wiktionary.org}: *default_project
    /{domain:ie.wiktionary.org}: *default_project
    /{domain:io.wiktionary.org}: *default_project
    /{domain:is.wiktionary.org}: *default_project
    /{domain:it.wiktionary.org}: *default_project
    /{domain:iu.wiktionary.org}: *default_project
    /{domain:ja.wiktionary.org}: *default_project
    /{domain:jbo.wiktionary.org}: *default_project
    /{domain:jv.wiktionary.org}: *default_project
    /{domain:ka.wiktionary.org}: *default_project
    /{domain:kk.wiktionary.org}: *default_project
    /{domain:kl.wiktionary.org}: *default_project
    /{domain:km.wiktionary.org}: *default_project
    /{domain:kn.wiktionary.org}: *default_project
    /{domain:ko.wiktionary.org}: *default_project
    /{domain:ks.wiktionary.org}: *default_project
    /{domain:ku.wiktionary.org}: *default_project
    /{domain:kw.wiktionary.org}: *default_project
    /{domain:ky.wiktionary.org}: *default_project
    /{domain:la.wiktionary.org}: *default_project
    /{domain:lb.wiktionary.org}: *default_project
    /{domain:li.wiktionary.org}: *default_project
    /{domain:ln.wiktionary.org}: *default_project
    /{domain:lo.wiktionary.org}: *default_project
    /{domain:lt.wiktionary.org}: *default_project
    /{domain:lv.wiktionary.org}: *default_project
    /{domain:mg.wiktionary.org}: *default_project
    /{domain:mi.wiktionary.org}: *default_project
    /{domain:mk.wiktionary.org}: *default_project
    /{domain:ml.wiktionary.org}: *default_project
    /{domain:mn.wiktionary.org}: *default_project
    /{domain:mr.wiktionary.org}: *default_project
    /{domain:ms.wiktionary.org}: *default_project
    /{domain:mt.wiktionary.org}: *default_project
    /{domain:my.wiktionary.org}: *default_project
    /{domain:na.wiktionary.org}: *default_project
    /{domain:nah.wiktionary.org}: *default_project
    /{domain:nds.wiktionary.org}: *default_project
    /{domain:ne.wiktionary.org}: *default_project
    /{domain:nl.wiktionary.org}: *default_project
    /{domain:nn.wiktionary.org}: *default_project
    /{domain:no.wiktionary.org}: *default_project
    /{domain:oc.wiktionary.org}: *default_project
    /{domain:om.wiktionary.org}: *default_project
    /{domain:or.wiktionary.org}: *default_project
    /{domain:pa.wiktionary.org}: *default_project
    /{domain:pl.wiktionary.org}: *default_project
    /{domain:pnb.wiktionary.org}: *default_project
    /{domain:ps.wiktionary.org}: *default_project
    /{domain:pt.wiktionary.org}: *default_project
    /{domain:qu.wiktionary.org}: *default_project
    /{domain:ro.wiktionary.org}: *default_project
    /{domain:roa-rup.wiktionary.org}: *default_project
    /{domain:ru.wiktionary.org}: *default_project
    /{domain:rw.wiktionary.org}: *default_project
    /{domain:sa.wiktionary.org}: *default_project
    /{domain:scn.wiktionary.org}: *default_project
    /{domain:sd.wiktionary.org}: *default_project
    /{domain:sg.wiktionary.org}: *default_project
    /{domain:sh.wiktionary.org}: *default_project
    /{domain:si.wiktionary.org}: *default_project
    /{domain:simple.wiktionary.org}: *default_project
    /{domain:sk.wiktionary.org}: *default_project
    /{domain:sl.wiktionary.org}: *default_project
    /{domain:sm.wiktionary.org}: *default_project
    /{domain:so.wiktionary.org}: *default_project
    /{domain:sq.wiktionary.org}: *default_project
    /{domain:sr.wiktionary.org}: *default_project
    /{domain:ss.wiktionary.org}: *default_project
    /{domain:st.wiktionary.org}: *default_project
    /{domain:su.wiktionary.org}: *default_project
    /{domain:sv.wiktionary.org}: *default_project
    /{domain:sw.wiktionary.org}: *default_project
    /{domain:ta.wiktionary.org}: *default_project
    /{domain:te.wiktionary.org}: *default_project
    /{domain:tg.wiktionary.org}: *default_project
    /{domain:th.wiktionary.org}: *default_project
    /{domain:ti.wiktionary.org}: *default_project
    /{domain:tk.wiktionary.org}: *default_project
    /{domain:tl.wiktionary.org}: *default_project
    /{domain:tn.wiktionary.org}: *default_project
    /{domain:tpi.wiktionary.org}: *default_project
    /{domain:tr.wiktionary.org}: *default_project
    /{domain:ts.wiktionary.org}: *default_project
    /{domain:tt.wiktionary.org}: *default_project
    /{domain:ug.wiktionary.org}: *default_project
    /{domain:uk.wiktionary.org}: *default_project
    /{domain:ur.wiktionary.org}: *default_project
    /{domain:uz.wiktionary.org}: *default_project
    /{domain:vec.wiktionary.org}: *default_project
    /{domain:vi.wiktionary.org}: *default_project
    /{domain:vo.wiktionary.org}: *default_project
    /{domain:wa.wiktionary.org}: *default_project
    /{domain:wo.wiktionary.org}: *default_project
    /{domain:yi.wiktionary.org}: *default_project
    /{domain:zh.wiktionary.org}: *default_project
    /{domain:zh-min-nan.wiktionary.org}: *default_project
    /{domain:zu.wiktionary.org}: *default_project

    # Wikiquote
    /{domain:af.wikiquote.org}: *default_project
    /{domain:ar.wikiquote.org}: *default_project
    /{domain:az.wikiquote.org}: *default_project
    /{domain:be.wikiquote.org}: *default_project
    /{domain:bg.wikiquote.org}: *default_project
    /{domain:br.wikiquote.org}: *default_project
    /{domain:bs.wikiquote.org}: *default_project
    /{domain:ca.wikiquote.org}: *default_project
    /{domain:cs.wikiquote.org}: *default_project
    /{domain:cy.wikiquote.org}: *default_project
    /{domain:da.wikiquote.org}: *default_project
    /{domain:de.wikiquote.org}: *default_project
    /{domain:el.wikiquote.org}: *default_project
    /{domain:en.wikiquote.org}: *default_project
    /{domain:eo.wikiquote.org}: *default_project
    /{domain:es.wikiquote.org}: *default_project
    /{domain:et.wikiquote.org}: *default_project
    /{domain:eu.wikiquote.org}: *default_project
    /{domain:fa.wikiquote.org}: *default_project
    /{domain:fi.wikiquote.org}: *default_project
    /{domain:fr.wikiquote.org}: *default_project
    /{domain:gl.wikiquote.org}: *default_project
    /{domain:gu.wikiquote.org}: *default_project
    /{domain:he.wikiquote.org}: *default_project
    /{domain:hi.wikiquote.org}: *default_project
    /{domain:hr.wikiquote.org}: *default_project
    /{domain:hu.wikiquote.org}: *default_project
    /{domain:hy.wikiquote.org}: *default_project
    /{domain:id.wikiquote.org}: *default_project
    /{domain:is.wikiquote.org}: *default_project
    /{domain:it.wikiquote.org}: *default_project
    /{domain:ja.wikiquote.org}: *default_project
    /{domain:ka.wikiquote.org}: *default_project
    /{domain:kn.wikiquote.org}: *default_project
    /{domain:ko.wikiquote.org}: *default_project
    /{domain:ku.wikiquote.org}: *default_project
    /{domain:ky.wikiquote.org}: *default_project
    /{domain:la.wikiquote.org}: *default_project
    /{domain:li.wikiquote.org}: *default_project
    /{domain:lt.wikiquote.org}: *default_project
    /{domain:ml.wikiquote.org}: *default_project
    /{domain:mr.wikiquote.org}: *default_project
    /{domain:nl.wikiquote.org}: *default_project
    /{domain:nn.wikiquote.org}: *default_project
    /{domain:no.wikiquote.org}: *default_project
    /{domain:pl.wikiquote.org}: *default_project
    /{domain:pt.wikiquote.org}: *default_project
    /{domain:ro.wikiquote.org}: *default_project
    /{domain:ru.wikiquote.org}: *default_project
    /{domain:sa.wikiquote.org}: *default_project
    /{domain:sk.wikiquote.org}: *default_project
    /{domain:sl.wikiquote.org}: *default_project
    /{domain:sq.wikiquote.org}: *default_project
    /{domain:sr.wikiquote.org}: *default_project
    /{domain:su.wikiquote.org}: *default_project
    /{domain:sv.wikiquote.org}: *default_project
    /{domain:ta.wikiquote.org}: *default_project
    /{domain:te.wikiquote.org}: *default_project
    /{domain:th.wikiquote.org}: *default_project
    /{domain:tr.wikiquote.org}: *default_project
    /{domain:uk.wikiquote.org}: *default_project
    /{domain:ur.wikiquote.org}: *default_project
    /{domain:uz.wikiquote.org}: *default_project
    /{domain:vi.wikiquote.org}: *default_project
    /{domain:wo.wikiquote.org}: *default_project
    /{domain:zh.wikiquote.org}: *default_project

    # Wikisource
    /{domain:ar.wikisource.org}: *default_project
    /{domain:as.wikisource.org}: *default_project
    /{domain:az.wikisource.org}: *default_project
    /{domain:be.wikisource.org}: *default_project
    /{domain:bg.wikisource.org}: *default_project
    /{domain:bn.wikisource.org}: *default_project
    /{domain:br.wikisource.org}: *default_project
    /{domain:bs.wikisource.org}: *default_project
    /{domain:ca.wikisource.org}: *default_project
    /{domain:cs.wikisource.org}: *default_project
    /{domain:cy.wikisource.org}: *default_project
    /{domain:da.wikisource.org}: *default_project
    /{domain:de.wikisource.org}: *default_project
    /{domain:el.wikisource.org}: *default_project
    /{domain:en.wikisource.org}: *default_project
    /{domain:eo.wikisource.org}: *default_project
    /{domain:es.wikisource.org}: *default_project
    /{domain:et.wikisource.org}: *default_project
    /{domain:fa.wikisource.org}: *default_project
    /{domain:fi.wikisource.org}: *default_project
    /{domain:fo.wikisource.org}: *default_project
    /{domain:fr.wikisource.org}: *default_project
    /{domain:gl.wikisource.org}: *default_project
    /{domain:gu.wikisource.org}: *default_project
    /{domain:he.wikisource.org}: *default_project
    /{domain:hr.wikisource.org}: *default_project
    /{domain:hu.wikisource.org}: *default_project
    /{domain:hy.wikisource.org}: *default_project
    /{domain:id.wikisource.org}: *default_project
    /{domain:is.wikisource.org}: *default_project
    /{domain:it.wikisource.org}: *default_project
    /{domain:ja.wikisource.org}: *default_project
    /{domain:kn.wikisource.org}: *default_project
    /{domain:ko.wikisource.org}: *default_project
    /{domain:la.wikisource.org}: *default_project
    /{domain:li.wikisource.org}: *default_project
    /{domain:lt.wikisource.org}: *default_project
    /{domain:mk.wikisource.org}: *default_project
    /{domain:ml.wikisource.org}: *default_project
    /{domain:mr.wikisource.org}: *default_project
    /{domain:nl.wikisource.org}: *default_project
    /{domain:no.wikisource.org}: *default_project
    /{domain:or.wikisource.org}: *default_project
    /{domain:pl.wikisource.org}: *default_project
    /{domain:pt.wikisource.org}: *default_project
    /{domain:ro.wikisource.org}: *default_project
    /{domain:ru.wikisource.org}: *default_project
    /{domain:sa.wikisource.org}: *default_project
    /{domain:sah.wikisource.org}: *default_project
    /{domain:sk.wikisource.org}: *default_project
    /{domain:sl.wikisource.org}: *default_project
    /{domain:sr.wikisource.org}: *default_project
    /{domain:sv.wikisource.org}: *default_project
    /{domain:ta.wikisource.org}: *default_project
    /{domain:te.wikisource.org}: *default_project
    /{domain:th.wikisource.org}: *default_project
    /{domain:tr.wikisource.org}: *default_project
    /{domain:uk.wikisource.org}: *default_project
    /{domain:vec.wikisource.org}: *default_project
    /{domain:vi.wikisource.org}: *default_project
    /{domain:yi.wikisource.org}: *default_project
    /{domain:zh.wikisource.org}: *default_project
    /{domain:zh-min-nan.wikisource.org}: *default_project

    # Wikibooks
    /{domain:af.wikibooks.org}: *default_project
    /{domain:ar.wikibooks.org}: *default_project
    /{domain:az.wikibooks.org}: *default_project
    /{domain:be.wikibooks.org}: *default_project
    /{domain:bg.wikibooks.org}: *default_project
    /{domain:bn.wikibooks.org}: *default_project
    /{domain:bs.wikibooks.org}: *default_project
    /{domain:ca.wikibooks.org}: *default_project
    /{domain:cs.wikibooks.org}: *default_project
    /{domain:cv.wikibooks.org}: *default_project
    /{domain:cy.wikibooks.org}: *default_project
    /{domain:da.wikibooks.org}: *default_project
    /{domain:de.wikibooks.org}: *default_project
    /{domain:el.wikibooks.org}: *default_project
    /{domain:en.wikibooks.org}: *default_project
    /{domain:eo.wikibooks.org}: *default_project
    /{domain:es.wikibooks.org}: *default_project
    /{domain:et.wikibooks.org}: *default_project
    /{domain:eu.wikibooks.org}: *default_project
    /{domain:fa.wikibooks.org}: *default_project
    /{domain:fi.wikibooks.org}: *default_project
    /{domain:fr.wikibooks.org}: *default_project
    /{domain:fy.wikibooks.org}: *default_project
    /{domain:gl.wikibooks.org}: *default_project
    /{domain:he.wikibooks.org}: *default_project
    /{domain:hi.wikibooks.org}: *default_project
    /{domain:hr.wikibooks.org}: *default_project
    /{domain:hu.wikibooks.org}: *default_project
    /{domain:hy.wikibooks.org}: *default_project
    /{domain:ia.wikibooks.org}: *default_project
    /{domain:id.wikibooks.org}: *default_project
    /{domain:is.wikibooks.org}: *default_project
    /{domain:it.wikibooks.org}: *default_project
    /{domain:ja.wikibooks.org}: *default_project
    /{domain:ka.wikibooks.org}: *default_project
    /{domain:kk.wikibooks.org}: *default_project
    /{domain:km.wikibooks.org}: *default_project
    /{domain:ko.wikibooks.org}: *default_project
    /{domain:ku.wikibooks.org}: *default_project
    /{domain:ky.wikibooks.org}: *default_project
    /{domain:la.wikibooks.org}: *default_project
    /{domain:li.wikibooks.org}: *default_project
    /{domain:lt.wikibooks.org}: *default_project
    /{domain:mg.wikibooks.org}: *default_project
    /{domain:mk.wikibooks.org}: *default_project
    /{domain:ml.wikibooks.org}: *default_project
    /{domain:mr.wikibooks.org}: *default_project
    /{domain:ms.wikibooks.org}: *default_project
    /{domain:ne.wikibooks.org}: *default_project
    /{domain:nl.wikibooks.org}: *default_project
    /{domain:no.wikibooks.org}: *default_project
    /{domain:oc.wikibooks.org}: *default_project
    /{domain:pa.wikibooks.org}: *default_project
    /{domain:pl.wikibooks.org}: *default_project
    /{domain:pt.wikibooks.org}: *default_project
    /{domain:ro.wikibooks.org}: *default_project
    /{domain:ru.wikibooks.org}: *default_project
    /{domain:sa.wikibooks.org}: *default_project
    /{domain:si.wikibooks.org}: *default_project
    /{domain:sk.wikibooks.org}: *default_project
    /{domain:sl.wikibooks.org}: *default_project
    /{domain:sq.wikibooks.org}: *default_project
    /{domain:sr.wikibooks.org}: *default_project
    /{domain:sv.wikibooks.org}: *default_project
    /{domain:ta.wikibooks.org}: *default_project
    /{domain:te.wikibooks.org}: *default_project
    /{domain:tg.wikibooks.org}: *default_project
    /{domain:th.wikibooks.org}: *default_project
    /{domain:tl.wikibooks.org}: *default_project
    /{domain:tr.wikibooks.org}: *default_project
    /{domain:tt.wikibooks.org}: *default_project
    /{domain:uk.wikibooks.org}: *default_project
    /{domain:ur.wikibooks.org}: *default_project
    /{domain:vi.wikibooks.org}: *default_project
    /{domain:zh.wikibooks.org}: *default_project

    # Wikinews
    /{domain:ar.wikinews.org}: *default_project
    /{domain:bg.wikinews.org}: *default_project
    /{domain:bs.wikinews.org}: *default_project
    /{domain:ca.wikinews.org}: *default_project
    /{domain:cs.wikinews.org}: *default_project
    /{domain:de.wikinews.org}: *default_project
    /{domain:el.wikinews.org}: *default_project
    /{domain:en.wikinews.org}: *default_project
    /{domain:eo.wikinews.org}: *default_project
    /{domain:es.wikinews.org}: *default_project
    /{domain:fa.wikinews.org}: *default_project
    /{domain:fi.wikinews.org}: *default_project
    /{domain:fr.wikinews.org}: *default_project
    /{domain:he.wikinews.org}: *default_project
    /{domain:it.wikinews.org}: *default_project
    /{domain:ja.wikinews.org}: *default_project
    /{domain:ko.wikinews.org}: *default_project
    /{domain:no.wikinews.org}: *default_project
    /{domain:pl.wikinews.org}: *default_project
    /{domain:pt.wikinews.org}: *default_project
    /{domain:ro.wikinews.org}: *default_project
    /{domain:ru.wikinews.org}: *default_project
    /{domain:sq.wikinews.org}: *default_project
    /{domain:sr.wikinews.org}: *default_project
    /{domain:sv.wikinews.org}: *default_project
    /{domain:ta.wikinews.org}: *default_project
    /{domain:tr.wikinews.org}: *default_project
    /{domain:uk.wikinews.org}: *default_project
    /{domain:zh.wikinews.org}: *default_project

    # Wikiversity
    /{domain:ar.wikiversity.org}: *default_project
    /{domain:cs.wikiversity.org}: *default_project
    /{domain:de.wikiversity.org}: *default_project
    /{domain:el.wikiversity.org}: *default_project
    /{domain:en.wikiversity.org}: *default_project
    /{domain:es.wikiversity.org}: *default_project
    /{domain:fi.wikiversity.org}: *default_project
    /{domain:fr.wikiversity.org}: *default_project
    /{domain:it.wikiversity.org}: *default_project
    /{domain:ja.wikiversity.org}: *default_project
    /{domain:ko.wikiversity.org}: *default_project
    /{domain:pt.wikiversity.org}: *default_project
    /{domain:ru.wikiversity.org}: *default_project
    /{domain:sl.wikiversity.org}: *default_project
    /{domain:sv.wikiversity.org}: *default_project

    # Wikivoyage
    /{domain:de.wikivoyage.org}: *default_project
    /{domain:el.wikivoyage.org}: *default_project
    /{domain:en.wikivoyage.org}: *default_project
    /{domain:es.wikivoyage.org}: *default_project
    /{domain:fa.wikivoyage.org}: *default_project
    /{domain:fr.wikivoyage.org}: *default_project
    /{domain:he.wikivoyage.org}: *default_project
    /{domain:it.wikivoyage.org}: *default_project
    /{domain:nl.wikivoyage.org}: *default_project
    /{domain:pl.wikivoyage.org}: *default_project
    /{domain:pt.wikivoyage.org}: *default_project
    /{domain:ro.wikivoyage.org}: *default_project
    /{domain:ru.wikivoyage.org}: *default_project
    /{domain:sv.wikivoyage.org}: *default_project
    /{domain:uk.wikivoyage.org}: *default_project
    /{domain:vi.wikivoyage.org}: *default_project
    /{domain:zh.wikivoyage.org}: *default_project

    # wikimedia
    /{domain:ar.wikimedia.org}: *default_project
    /{domain:bd.wikimedia.org}: *default_project
    /{domain:be.wikimedia.org}: *default_project
    /{domain:br.wikimedia.org}: *default_project
    /{domain:ca.wikimedia.org}: *default_project
    /{domain:cn.wikimedia.org}: *default_project
    /{domain:co.wikimedia.org}: *default_project
    /{domain:commons.wikimedia.org}: *default_project
    /{domain:dk.wikimedia.org}: *default_project
    /{domain:donate.wikimedia.org}: *default_project
    /{domain:ee.wikimedia.org}: *default_project
    /{domain:et.wikimedia.org}: *default_project
    /{domain:fi.wikimedia.org}: *default_project
    /{domain:incubator.wikimedia.org}: *default_project
    /{domain:wikitech.wikimedia.org}: *default_project
    /{domain:login.wikimedia.org}: *default_project
    /{domain:meta.wikimedia.org}: *default_project
    /{domain:mk.wikimedia.org}: *default_project
    /{domain:mx.wikimedia.org}: *default_project
    /{domain:nl.wikimedia.org}: *default_project
    /{domain:no.wikimedia.org}: *default_project
    /{domain:nyc.wikimedia.org}: *default_project
    /{domain:outreach.wikimedia.org}: *default_project
    /{domain:pl.wikimedia.org}: *default_project
    /{domain:rs.wikimedia.org}: *default_project
    /{domain:ru.wikimedia.org}: *default_project
    /{domain:se.wikimedia.org}: *default_project
    /{domain:species.wikimedia.org}: *default_project
    /{domain:tr.wikimedia.org}: *default_project
    /{domain:ua.wikimedia.org}: *default_project
    /{domain:vote.wikimedia.org}: *default_project
    /{domain:wikimania2014.wikimedia.org}: *default_project
    /{domain:wikimania2015.wikimedia.org}: *default_project
    /{domain:wikimania2016.wikimedia.org}: *default_project

    # specials
    /{domain:wikimediafoundation.org}: *default_project
    /{domain:www.mediawiki.org}: *default_project
    /{domain:wikisource.org}: *default_project
    /{domain:test.wikidata.org}: *default_project
    /{domain:www.wikidata.org}: *default_project

    # global domain
    /{domain:wikimedia.org}: *wikimedia.org



# Finally, a standard service-runner config.
info:
  name: restbase

# The main service setup. Each worker can offer one or more services.
services:
  - name: restbase
    module: ./restbase/lib/server
    conf:
      port: <%= @port %>
      spec: *root_spec
      salt: <%= @salt_key %>
      default_page_size: <%= @page_size %>
      user_agent: RESTBase/WMF

# Log error messages and gracefully restart a worker if v8 reports using more
# heap (note: not RSS).
worker_heap_limit_mb: 300

logging:
  name: restbase
  level: <%= @logging_level %>
  streams:
  # XXX: Use gelf-stream -> logstash
  - type: gelf
    host: <%= @logstash_host %>
    port: <%= @logstash_port %>

# StatsD metrics collection
metrics:
  name: restbase
  type: statsd # default, but lets be explicit
  host: <%= @statsd_host %>
  port: <%= @statsd_port %>
